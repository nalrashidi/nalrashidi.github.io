"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[312],{4275:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(3144),i=n(5671),s=n(547),a=n(2974),o=n.n(a),h=(0,r.Z)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;(0,i.Z)(this,e),this.villageId=t,this.buildingId=n,this.placeId=r,this.upgrade=s,this.finishAt=a,this.level=o})),l=(0,r.Z)((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,i.Z)(this,e),Array.isArray(n)||(n=[0,-1,"",0,!1,[],{},[],{},[]]),this.id=n[0],this.type=n[1],this.name=n[2],this.loyalty=n[3],this.isCapital=n[4];for(var r=this.buildings=[],s=n[5],a=0,o=1;a<s.length;a+=2,o++)r.push([o,s[a],s[a+1]]);this.movements=n[6],this.productions=n[7],this.troops=n[8],this.orders=[],n[9].forEach((function(e){t.orders.push(new h(e[0],e[1],e[2],e[3],e[4],e[5]))})),0!==this.orders.length&&this.orders.sort((function(e,t){return e.finishAt-t.finishAt}))}));function d(){return s.Z.request(o().PLAYER_VILLAGE)}s.Z.defineStructure(o().PLAYER_VILLAGE,l),s.Z.onResponse(o().PLAYER_VILLAGE)},1089:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(5671),i=n(3144),s=n(136),a=n(8557),o=n(7313),h=n(3983),l=n(9269),d=n(3514),c=n(895),u=n(7513),f=n(3849),v=n(1616),p=n(6417),m=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).timer=0,i.ref=o.createRef(),i.order=e.order,i.onFinish=e.onFinish,i}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval((function(){var t=Math.floor((e.order.finishAt-Date.now())/1e3);if(t<0)return clearInterval(e.timer),void e.onFinish();t>0&&(e.ref.current.textContent=d.Z.toTime(t))}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:h.M.del()}),(0,p.jsxs)("td",{className:"name",children:[l.Z.Name(this.order.buildingId)," (\u0627\u0644\u0645\u0633\u062a\u0648\u0649 ",this.order.level,")"]}),(0,p.jsxs)("td",{children:["\u0628\u0627\u0642\u064a ",(0,p.jsx)("span",{ref:this.ref,children:d.Z.toTime(Math.floor((this.order.finishAt-Date.now())/1e3))})," \u0645\u0646 \u0627\u0644\u0648\u0642\u062a "]})]})}}]),n}(o.PureComponent),Z=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).data=c.Z.buildingOrders,e}return(0,i.Z)(n,[{key:"ordersRow",value:function(){var e=this;return this.data.orders.filter((function(e){return e.finishAt-Date.now()>0})).map((function(t){return(0,p.jsx)(m,{order:t,onFinish:function(){return e.refresh()}},t.finishAt)}))}},{key:"refresh",value:function(){this.componentIsReady&&this.setState({ready:Date.now()})}},{key:"render",value:function(){var e=this.ordersRow();return 0===this.state.ready||0===e.length?(0,p.jsx)(p.Fragment,{}):(0,p.jsx)(f.Z,{children:(0,p.jsx)(v.Z,{children:(0,p.jsxs)("table",{id:"upgrades",children:[(0,p.jsx)("thead",{children:(0,p.jsx)("tr",{children:(0,p.jsxs)("th",{colspan:"3",children:["\u0627\u0644\u0628\u0646\u0627\u0621: ",h.M.clock("\u0625\u0633\u062a\u0643\u0645\u0627\u0644 \u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0628\u0646\u0627\u0621 \u0648\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0647\u0630\u0647 \u0627\u0644\u0642\u0631\u064a\u0629 \u0641\u0648\u0631\u0627\u064b \u0627\u0644\u062a\u0643\u0644\u0641\u0629 2 \u0630\u0647\u0628")]})})}),(0,p.jsx)("tbody",{children:e})]},this.state.ready)})})}}]),n}(u.Z),g=Z},4312:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var r=n(5671),i=n(3144),s=n(136),a=n(8557),o=(n(7313),n(2888)),h=n(1809),l=n(9269),d=n(4275),c=n(1089),u=n(6417),f=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={ready:!1,name:"",isCapital:!1,center:[],orders:null},e}return(0,i.Z)(n,[{key:"onReady",value:function(){var e=this;(0,d.Z)().then((function(t){if(e.componentIsReady&&t){for(var n=t.buildings,r=t.id,i=[],s=[l.Z.FromResponse(n[39],r).LinkComponent],a=18;a<39;a++){var o=l.Z.FromResponse(n[a],r),h=16===o.buildingId;(!h||h&&o.level>0)&&i.push(o.ImageComponent),s.push(o.LinkComponent)}e.ready=!0,e.updateState({ready:!0,name:t.name,isCapital:t.isCapital,center:i.concat(s)})}}))}},{key:"render",value:function(){return this.state.ready?(0,u.jsxs)("div",{id:"village_center",children:[(0,u.jsxs)("h4",{className:"title",children:[this.state.name,this.state.isCapital?(0,u.jsx)("span",{className:"capital",children:"(\u0627\u0644\u0639\u0627\u0635\u0645\u0629)"}):(0,u.jsx)(u.Fragment,{})]}),(0,u.jsxs)("svg",{viewBox:"0 0 540 448",children:[(0,u.jsx)("image",{className:"bg-center",xlinkHref:h,x:"0",y:"0",height:"540",width:"448"}),this.state.center]}),(0,u.jsx)(c.Z,{})]}):(0,u.jsx)(u.Fragment,{})}}]),n}(o.Z),v=f},1809:function(e,t,n){e.exports=n.p+"static/media/CenterHD.dfaa0557153dfa1af3fa.webp"}}]);