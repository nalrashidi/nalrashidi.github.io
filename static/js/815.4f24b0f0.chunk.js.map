{"version":3,"file":"static/js/815.4f24b0f0.chunk.js","mappings":"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","sources":["components/Functions/getParam.js","components/Functions/villageType.js","components/API/View.js","components/View.jsx"],"sourcesContent":["export default function getParam(name = \"\", def = \"\", asNumber = false) {\r\n    let p = new URLSearchParams(window.location.search).get(name);\r\n    return asNumber ? parseInt(p) || def : p || def;\r\n}","let wood = [4, 5, 5, 4, 3, 3, 4, 3, 1];\r\nlet clay = [4, 4, 3, 5, 5, 4, 3, 3, 1];\r\nlet iron = [4, 3, 4, 3, 4, 5, 5, 3, 1];\r\nlet crop = [6, 6, 6, 6, 6, 6, 6, 9, 15];\r\n\r\nconst getVillageType = (landType = 0) => [wood[landType], clay[landType], iron[landType], crop[landType]];\r\n\r\nexport default getVillageType;","import socket from \"../CLASSES/Socket\";\r\nimport codes from \"../CLASSES/opcode\";\r\n\r\nclass ViewLandResponse {\r\n    /** @param {[Number, Number, Number, Number, Number, String, Number, Number, String, Number, String, Number, Number, Number, String, Number, Number, [], []]} response */\r\n    constructor(response = []) {\r\n        this.id = response[0];\r\n        this.x = response[1];\r\n        this.y = response[2];\r\n        this.isVillage = response[3] === 1;\r\n        this.type = response[4];\r\n        this.name = response[5];\r\n        this.race = response[6];\r\n        this.allianceId = response[7];\r\n        this.allianceName = response[8];\r\n        this.playerId = response[9];\r\n        this.playerName = response[10];\r\n        this.isCapital = response[11];\r\n        this.isCurrentActiveVillage = response[12];\r\n        this.population = response[13];\r\n        this.villageId = response[14];\r\n        this.villageName = response[15];\r\n        this.hasRallyPoint = response[16];\r\n        this.hasMarketPlace = response[17];\r\n        this.reports = response[18];\r\n        this.monsters = response[19];\r\n    }\r\n}\r\n\r\n/** @returns {Promise<ViewLandResponse>} */\r\nexport default function requestView(vId = 0) {\r\n    return socket.request(codes.VIEW_LAND, { id: Math.floor((vId >= 1 && vId <= 10201) ? vId : 0) });\r\n};\r\nsocket.defineStructure(codes.VIEW_LAND, ViewLandResponse);","import { Col, Container, Row } from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport client from \"./CLASSES/client\";\r\nimport { Race } from \"./CLASSES/troops\";\r\nimport ImageMap from \"./Images\";\r\nimport Pure from \"./Pure\";\r\nimport { IMG, TITLE } from \"./SubComponents/IMG\";\r\nimport getVillageType from \"./Functions/villageType\";\r\nimport \"./View.css\";\r\nimport getParam from \"./Functions/getParam\";\r\nimport requestView from \"./API/View\";\r\n\r\nclass View extends Pure {\r\n    id = getParam(\"id\", client.activeVillageId || 1, true);\r\n    capital = <></>;\r\n    infoTable = <></>;\r\n    oasisTable = <></>;\r\n    reportsTable = <></>;\r\n    imageSource = \"\";\r\n    state = { ready: false }\r\n\r\n    renderInfoTable() {\r\n        let land = this.land;\r\n        let owned = land.playerId > 0;\r\n        let oasis = !land.isVillage;\r\n        let type = land.type;\r\n\r\n        let thead = <></>, tbody = <></>;\r\n        if (!(oasis && owned))\r\n            thead = <thead><tr><th colSpan={(!oasis && owned) ? 1 : 3}>{oasis ? \"الوحدات\" : (owned ? \"معلومات\" : \"توزيع الأراضي\")}:</th></tr></thead>\r\n\r\n        let race = <></>,\r\n            alliance = <></>,\r\n            owner = <></>,\r\n            ownerVillage = <></>,\r\n            population = <></>;\r\n        // monsters = <></>;\r\n        if (owned) {\r\n            race = <tr><td>القبيلة:</td><td><b>{Race.Names[land.race]}</b></td></tr>;\r\n            alliance = <tr><td>التحالف:</td><td>لا يوجد</td></tr>;\r\n            owner = <tr><td>المالك:</td><td><Link to={\"/Profile?id=\" + land.playerId}>{land.playerName}</Link></td></tr>;\r\n            if (oasis)\r\n                ownerVillage = <tr><td>القرية:</td><td><Link to={\"/View?id=\" + land.villageId}>{land.villageName}</Link></td></tr>;\r\n            else\r\n                population = <tr><td>السكان:</td><td><b>{land.population}</b></td></tr>;\r\n            tbody = <tbody>{race}{alliance}{owner}{oasis ? ownerVillage : population}</tbody>;\r\n        } else {\r\n            if (oasis) {\r\n                let mobile = window.screen.availWidth < 960;\r\n                let row = (className, inc) => <tr key={className}><td>{IMG.res(className)}{mobile ? \"\" : ` إنتاج ${TITLE.res[className]} `}</td><td><b>+%{inc}</b> في الساعة</td></tr>;\r\n                let increment = [];\r\n                if (type < 4) increment.push(row(\"r\" + (type + 1), \"100\"));\r\n                else if (type < 7) increment.push(row(\"r\" + (type - 3), \"50\"), row(\"r4\", \"50\"));\r\n                else increment.push(row(\"r4\", \"100\"));\r\n                this.oasisTable = <table className=\"info oasis\">\r\n                    <thead><tr><th colSpan={2}>الإنتاج:</th></tr></thead>\r\n                    <tbody>{increment}</tbody>\r\n                </table>;\r\n                // monsters = ...;\r\n            } else {\r\n                let landType = getVillageType(type);\r\n                tbody = <tbody>\r\n                    <tr><td>{IMG.res(\"r1\")}</td><td className=\"number\">{landType[0]}</td><td>حطاب</td></tr>\r\n                    <tr><td>{IMG.res(\"r2\")}</td><td className=\"number\">{landType[1]}</td><td>حفرة طين</td></tr>\r\n                    <tr><td>{IMG.res(\"r3\")}</td><td className=\"number\">{landType[2]}</td><td>منجم حديد</td></tr>\r\n                    <tr><td>{IMG.res(\"r4\")}</td><td className=\"number\">{landType[3]}</td><td>حقل قمح</td></tr>\r\n                </tbody>\r\n            }\r\n        }\r\n        this.infoTable = <>\r\n            <table className=\"info\">{thead}{tbody}</table>\r\n            <br />\r\n            {this.oasisTable}\r\n        </>;\r\n    }\r\n    options() {\r\n        let content = [];\r\n        let land = this.land;\r\n        if (!land.isCurrentActiveVillage) {\r\n            let owned = land.playerId > 0;\r\n            let oasis = !land.isVillage;\r\n            let rally = land.hasRallyPoint;\r\n            if (oasis) {\r\n                content.push(<div key=\"SendTroops\">{rally ? <Link to={\"#/SendTroops?id\" + land.id}>» نهب واحة مهجورة</Link> : <>» نهب واحة مهجورة (<Link to=\"/Building?id=39\">قم ببناء نقطة التجمع</Link>)</>}</div>);\r\n            } else if (owned) {\r\n                content.push(<div key=\"SendTroops\">{rally ? <Link to={\"#/SendTroops?id\" + land.id}>» إرسال قوات</Link> : <>» إرسال قوات (<Link to=\"/Building?id=39\">قم ببناء نقطة التجمع</Link>)</>}</div>);\r\n                content.push(<div key=\"SendResources\">{land.hasMarketPlace ? <Link to={\"#/SendResources?id\" + land.id}>» إرسال تجار</Link> : \"» إرسال تجار (قم ببناء السوق)\"}</div>);\r\n            } else\r\n                content.push(<div key=\"SettleVillage\">» بناء قرية جديدة</div>);\r\n        }\r\n        return content;\r\n    }\r\n    onReady() {\r\n        requestView(this.id).then(land => {\r\n            this.land = land;\r\n            if (land.isCapital)\r\n                this.capital = <><br /><span className=\"capital\">(عاصمة)</span></>;\r\n            this.imageSource = ImageMap[land.isVillage ? \"village\" : \"oasis\"][land.type];\r\n            this.renderInfoTable();\r\n            this.updateState({ ready: true });\r\n        });\r\n    }\r\n    render() {\r\n        if (!this.state.ready)\r\n            return <></>;\r\n        else {\r\n            let land = this.land;\r\n            let mobile = window.screen.availWidth < 960;\r\n            return <div id=\"ViewLand\">\r\n                <h4 className=\"title\"><span className=\"VillageName\">{land.name}</span>({land.x} , {land.y}){this.capital}</h4>\r\n                <Container>\r\n                    <Row>\r\n                        <Col><img alt={land.isVillage ? \"قرية\" : \"واحة\"} width={mobile ? 150 : 300} height={mobile ? 132 : 264} src={this.imageSource} /></Col>\r\n                        <Col>{this.infoTable}</Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col className=\"options\">\r\n                            <div><b>خيارات:</b></div>\r\n                            <div><Link to={\"/Map?id=\" + land.id}>» مركز الخريطة</Link></div>\r\n                            {this.options()}\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n            </div>;\r\n        }\r\n    }\r\n}\r\n\r\nexport default View;"],"names":["getParam","name","def","asNumber","p","URLSearchParams","window","location","search","get","parseInt","wood","clay","iron","crop","landType","ViewLandResponse","response","this","id","x","y","isVillage","type","race","allianceId","allianceName","playerId","playerName","isCapital","isCurrentActiveVillage","population","villageId","villageName","hasRallyPoint","hasMarketPlace","reports","monsters","socket","codes","View","client","capital","infoTable","oasisTable","reportsTable","imageSource","state","ready","land","owned","oasis","thead","tbody","colSpan","alliance","owner","ownerVillage","Race","to","mobile","screen","availWidth","row","className","inc","IMG","TITLE","increment","push","getVillageType","content","rally","vId","Math","floor","requestView","then","ImageMap","renderInfoTable","updateState","Container","Row","Col","alt","width","height","src","options","Pure"],"sourceRoot":""}