{"version":3,"file":"static/js/489.a006a776.chunk.js","mappings":"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","sources":["components/Functions/getParam.js","components/Functions/villageType.js","components/View.jsx"],"sourcesContent":["export default function getParam(name = \"\", def = \"\", asNumber = false) {\r\n    let p = new URLSearchParams(window.location.search).get(name);\r\n    return asNumber ? parseInt(p) || def : p || def;\r\n}","let wood = [4, 5, 5, 4, 3, 3, 4, 3, 1];\r\nlet clay = [4, 4, 3, 5, 5, 4, 3, 3, 1];\r\nlet iron = [4, 3, 4, 3, 4, 5, 5, 3, 1];\r\nlet crop = [6, 6, 6, 6, 6, 6, 6, 9, 15];\r\n\r\nconst getVillageType = (landType = 0) => [wood[landType], clay[landType], iron[landType], crop[landType]];\r\n\r\nexport default getVillageType;","import { Col, Container, Row } from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport client from \"./CLASSES/client\";\r\nimport { Race } from \"./CLASSES/troops\";\r\nimport { ViewResponse } from \"./CLASSES/Response\";\r\nimport ImageMap from \"./Images\";\r\nimport Pure from \"./Pure\";\r\nimport { IMG, TITLE } from \"./SubComponents/IMG\";\r\nimport getVillageType from \"./Functions/villageType\";\r\nimport \"./View.css\";\r\nimport getParam from \"./Functions/getParam\";\r\n\r\nclass View extends Pure {\r\n    id = getParam(\"id\", client.activeVillageId || 1, true);\r\n    land = new ViewResponse();\r\n    capital = <></>;\r\n    infoTable = <></>;\r\n    oasisTable = <></>;\r\n    reportsTable = <></>;\r\n    imageSource = \"\";\r\n    state = { ready: false }\r\n\r\n    /** @param {ViewResults} land */\r\n    renderInfoTable(land) {\r\n        let owned = land.playerId > 0;\r\n        let oasis = !land.isVillage;\r\n        let type = land.type;\r\n\r\n        let thead = <></>, tbody = <></>;\r\n        if (!(oasis && owned))\r\n            thead = <thead><tr><th colSpan={(!oasis && owned) ? 1 : 3}>{oasis ? \"الوحدات\" : (owned ? \"معلومات\" : \"توزيع الأراضي\")}:</th></tr></thead>\r\n\r\n        let race = <></>,\r\n            alliance = <></>,\r\n            owner = <></>,\r\n            ownerVillage = <></>,\r\n            population = <></>;\r\n        // monsters = <></>;\r\n        if (owned) {\r\n            race = <tr><td>القبيلة:</td><td><b>{Race.Names[land.race]}</b></td></tr>;\r\n            alliance = <tr><td>التحالف:</td><td>لا يوجد</td></tr>;\r\n            owner = <tr><td>المالك:</td><td><Link to={\"/Profile?id=\" + land.playerId}>{land.playerName}</Link></td></tr>;\r\n            if (oasis)\r\n                ownerVillage = <tr><td>القرية:</td><td><Link to={\"/View?id=\" + land.villageId}>{land.villageName}</Link></td></tr>;\r\n            else\r\n                population = <tr><td>السكان:</td><td><b>{land.population}</b></td></tr>;\r\n            tbody = <tbody>{race}{alliance}{owner}{oasis ? ownerVillage : population}</tbody>;\r\n        } else {\r\n            if (oasis) {\r\n                let mobile = window.screen.availWidth < 960;\r\n                let row = (className, inc) => <tr key={className}><td>{IMG.res(className)}{mobile ? \"\" : ` إنتاج ${TITLE.res[className]} `}</td><td><b>+%{inc}</b> في الساعة</td></tr>;\r\n                let increment = [];\r\n                if (type < 4) increment.push(row(\"r\" + (type + 1), \"100\"));\r\n                else if (type < 7) increment.push(row(\"r\" + (type - 3), \"50\"), row(\"r4\", \"50\"));\r\n                else increment.push(row(\"r4\", \"100\"));\r\n                this.oasisTable = <table className=\"info oasis\">\r\n                    <thead><tr><th colSpan={2}>الإنتاج:</th></tr></thead>\r\n                    <tbody>{increment}</tbody>\r\n                </table>;\r\n                // monsters = ...;\r\n            } else {\r\n                let landType = getVillageType(type);\r\n                tbody = <tbody>\r\n                    <tr><td>{IMG.res(\"r1\")}</td><td className=\"number\">{landType[0]}</td><td>حطاب</td></tr>\r\n                    <tr><td>{IMG.res(\"r2\")}</td><td className=\"number\">{landType[1]}</td><td>حفرة طين</td></tr>\r\n                    <tr><td>{IMG.res(\"r3\")}</td><td className=\"number\">{landType[2]}</td><td>منجم حديد</td></tr>\r\n                    <tr><td>{IMG.res(\"r4\")}</td><td className=\"number\">{landType[3]}</td><td>حقل قمح</td></tr>\r\n                </tbody>\r\n            }\r\n        }\r\n        this.infoTable = <>\r\n            <table className=\"info\">{thead}{tbody}</table>\r\n            <br />\r\n            {this.oasisTable}\r\n        </>;\r\n    }\r\n    /** @param {ViewResults} land */\r\n    options(land) {\r\n        let content = [];\r\n        if (land.id !== client.activeVillageId) {\r\n            let owned = land.playerId > 0;\r\n            let oasis = !land.isVillage;\r\n            let rally = land.hasRallyPoint;\r\n            if (oasis) {\r\n                content.push(<div key=\"SendTroops\">{rally ? <Link to={\"#/SendTroops?id\" + land.id}>» نهب واحة مهجورة</Link> : <>» نهب واحة مهجورة (<Link to=\"/Building?id=39\">قم ببناء نقطة التجمع</Link>)</>}</div>);\r\n            } else if (owned) {\r\n                content.push(<div key=\"SendTroops\">{rally ? <Link to={\"#/SendTroops?id\" + land.id}>» إرسال قوات</Link> : <>» إرسال قوات (<Link to=\"/Building?id=39\">قم ببناء نقطة التجمع</Link>)</>}</div>);\r\n                content.push(<div key=\"SendResources\">{land.hasMarketPlace ? <Link to={\"#/SendResources?id\" + land.id}>» إرسال تجار</Link> : \"» إرسال تجار (قم ببناء السوق)\"}</div>);\r\n            } else\r\n                content.push(<div key=\"SettleVillage\">» بناء قرية جديدة</div>);\r\n        }\r\n        return content;\r\n    }\r\n    onReady() {\r\n        client.viewLand(this.id).then(land => {\r\n            Object.assign(this.land, land);\r\n            if (land.isCapital)\r\n                this.capital = <><br /><span className=\"capital\">(عاصمة)</span></>;\r\n            this.imageSource = ImageMap[land.isVillage ? \"village\" : \"oasis\"][land.type];\r\n            this.renderInfoTable(land);\r\n            this.updateState({ ready: true });\r\n        });\r\n    }\r\n    render() {\r\n        if (!this.state.ready)\r\n            return <></>;\r\n        else {\r\n            let land = this.land;\r\n            let mobile = window.screen.availWidth < 960;\r\n            return <div id=\"ViewLand\">\r\n                <h4 className=\"title\"><span className=\"VillageName\">{land.name}</span>({land.x} , {land.y}){this.capital}</h4>\r\n                <Container>\r\n                    <Row>\r\n                        <Col><img alt={land.isVillage ? \"قرية\" : \"واحة\"} width={mobile ? 150 : 300} height={mobile ? 132 : 264} src={this.imageSource} /></Col>\r\n                        <Col>{this.infoTable}</Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col className=\"options\">\r\n                            <div><b>خيارات:</b></div>\r\n                            <div><Link to={\"/Map?id=\" + land.id}>» مركز الخريطة</Link></div>\r\n                            {this.options(land)}\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n            </div>;\r\n        }\r\n    }\r\n}\r\n\r\nexport default View;"],"names":["getParam","name","def","asNumber","p","URLSearchParams","window","location","search","get","parseInt","wood","clay","iron","crop","landType","View","id","client","land","ViewResponse","capital","infoTable","oasisTable","reportsTable","imageSource","state","ready","owned","playerId","oasis","isVillage","type","thead","tbody","colSpan","race","alliance","owner","ownerVillage","population","Race","to","playerName","villageId","villageName","mobile","screen","availWidth","row","className","inc","IMG","TITLE","increment","push","this","getVillageType","content","rally","hasRallyPoint","hasMarketPlace","then","Object","assign","isCapital","ImageMap","renderInfoTable","updateState","x","y","Container","Row","Col","alt","width","height","src","options","Pure"],"sourceRoot":""}