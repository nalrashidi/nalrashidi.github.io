{"version":3,"file":"static/js/349.3e64f6bf.chunk.js","mappings":"uPAMMA,EAAO,CACTC,SAAU,CAEN,CAAC,GAAI,KACL,CAAC,GAAI,IACL,CAAC,GAAI,IACL,CAAC,IAAK,IACN,CAAC,IAAK,IACN,CAAC,IAAK,GACN,CAAC,KAAM,IACP,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,IAAK,IACN,CAAC,IAAK,IACN,CAAC,IAAK,IACN,CAAC,IAAK,IACN,CAAC,IAAK,GACN,CAAC,GAAI,KACL,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,IACN,CAAC,IAAK,IACN,CAAC,IAAK,IACN,CAAC,IAAK,IACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,IACN,CAAC,IAAK,IACN,CAAC,IAAK,IACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,IACN,CAAC,IAAK,IACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,IACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,MAEVC,MAAO,CACH,CAAC,IAAK,KACN,CAAC,IAAK,GACN,CAAC,IAAK,KACN,CAAC,IAAK,IACN,CAAC,IAAK,KACN,CAAC,IAAK,IACN,CAAC,IAAK,KACN,CAAC,IAAK,IACN,CAAC,IAAK,KACN,CAAC,IAAK,IACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,KACN,CAAC,IAAK,MAEVC,OAAQ,CACJ,qBACA,0BACA,uBACA,2BAEJC,QAAS,CACL,8BACA,+BACA,gCACA,+BACA,8BACA,8BACA,8BACA,+BACA,iCACA,kCACA,iCACA,+BACA,8BACA,8BACA,iCACA,kCACA,kCACA,kCACA,iCACA,+BACA,8BACA,kCACA,kCACA,kCACA,kCACA,kCACA,iCACA,+BACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,iCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,kCACA,oCAIFC,EAAU,CACZC,GAAI,cAGFC,EAAAA,SAAAA,IAAAA,EAAAA,EAAAA,GAAAA,EAAAA,GAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,GAAAA,SAAAA,IAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,KAAAA,GAAAA,IAAAA,IAAAA,EAAAA,UAAAA,OAAAA,EAAAA,IAAAA,MAAAA,GAAAA,EAAAA,EAAAA,EAAAA,EAAAA,IAAAA,EAAAA,GAAAA,UAAAA,GACM,OADNA,EAAAA,EAAAA,KAAAA,MAAAA,EAAAA,CAAAA,MAAAA,OAAAA,KACFC,MAAQ,CACJC,GAAIC,SAAS,IAAIC,gBAAgBC,OAAOC,SAASC,QAAQC,IAAI,QAAUC,EAAAA,EAAAA,iBAA0B,EACjGC,EAAG,EAAGC,EAAG,EACTC,OAAO,GAHH,EAuEP,OAvEO,8BAKR,cAEC,mBACD,WACIC,KAAKC,YAAY,CAAEF,OAAO,MAC7B,0BACD,WAA4B,IAAfF,EAAc,uDAAV,EAAGC,EAAO,uDAAH,EACpBE,KAAKC,YAAY,CAAEJ,EAAAA,EAAGC,EAAAA,EAAGC,OAAO,MACnC,mBACD,WAA+B,IAAzBG,EAAwB,uDAAhB,EAAGC,EAAa,uDAAP,MACfd,EAAKe,KAAKC,MAAML,KAAKZ,MAAMC,GAAKa,GAASC,EAC7ClB,EAAQC,GAAGG,GACXW,KAAKC,YAAY,CAAEZ,GAAIA,EAAK,EAAIA,EAAKc,EAAMd,MAC9C,mBACD,WAAS,IAAD,OACJ,OAAO,SAAAiB,GACHA,EAAEC,iBACF,EAAKC,OAAO,QAEnB,kBACD,WAAQ,IAAD,OACH,OAAO,SAAAF,GACHA,EAAEC,iBACF,EAAKC,MAAM,EAAG,OAErB,kBACD,WAAQ,IAAD,OACH,OAAO,SAAAF,GACHA,EAAEC,iBACF,EAAKC,OAAO,EAAG,OAEtB,mBACD,WAAS,IAAD,OACJ,OAAO,SAAAF,GACHA,EAAEC,iBACF,EAAKC,MAAM,QAElB,oBACD,WAAU,IAAD,OACL,OAAKZ,EAAAA,EAAAA,MAEAA,EAAAA,EAAAA,YAEE,iBAAKP,GAAG,MAAR,WACH,2DAAUW,KAAKZ,MAAMW,MAAX,YAAwBC,KAAKZ,MAAMS,EAAnC,cAA0CG,KAAKZ,MAAMU,EAArD,KAA4D,OACtE,kBAAOW,UAAU,2BAAjB,UACI,8BACI,yBAAI,eAAIC,QAAS,EAAb,iEACJ,2BAAI,mEAAgB,kCACpB,2BAAI,mEAAgB,kCACpB,2BAAI,yEAAiB,uCAG7B,iBAAKC,QAAQ,cAAb,WACI,kBAAOC,UAAWC,EAAAA,EAAAA,IAAAA,WAAyBC,MAAO,IAAKC,OAAQ,OAC/D,SAACC,EAAD,CAAS3B,GAAIW,KAAKZ,MAAMC,GACpB4B,QAAS,kBAAM,EAAKlB,SACpBmB,QAAS,SAACrB,EAAGC,GAAJ,OAAU,EAAKqB,aAAatB,EAAGC,IACxCsB,OAAQ,kBAAM,EAAKA,aAEvB,SAAC,KAAD,CAAMC,GAAG,IAAIC,QAAStB,KAAKuB,QAA3B,UAAoC,oBAASC,OAAQ5C,EAAKG,OAAO,QACjE,SAAC,KAAD,CAAMsC,GAAG,IAAIC,QAAStB,KAAKyB,OAA3B,UAAmC,oBAASD,OAAQ5C,EAAKG,OAAO,QAChE,SAAC,KAAD,CAAMsC,GAAG,IAAIC,QAAStB,KAAK0B,OAA3B,UAAmC,oBAASF,OAAQ5C,EAAKG,OAAO,QAChE,SAAC,KAAD,CAAMsC,GAAG,IAAIC,QAAStB,KAAK2B,QAA3B,UAAoC,oBAASH,OAAQ5C,EAAKG,OAAO,cArB9D,SAAC,KAAD,CAAUsC,GAAG,WAFb,4BA0Bd,EAxEClC,CAAYyC,EAAAA,GA2EZZ,EAAAA,SAAAA,IAAAA,EAAAA,EAAAA,GAAAA,EAAAA,GAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,GAAAA,SAAAA,IAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,KAAAA,GAAAA,IAAAA,IAAAA,EAAAA,UAAAA,OAAAA,EAAAA,IAAAA,MAAAA,GAAAA,EAAAA,EAAAA,EAAAA,EAAAA,IAAAA,EAAAA,GAAAA,UAAAA,GACM,OADNA,EAAAA,EAAAA,KAAAA,MAAAA,EAAAA,CAAAA,MAAAA,OAAAA,KACF5B,MAAQ,CAAEyC,QAAS,IAAX,EAsCP,OAtCO,+BACR,WAAiB,IAAD,OAARxC,EAAQ,uDAAH,EACTO,EAAAA,EAAAA,eAAqB,SAAAkC,GACjB,GAAK,EAAKC,iBAAV,CACA,IAAIC,EAAS,GACTC,EAAQ,GACRC,EAAQ,GACRC,EAAQ,EACRC,EAAQ,EACZN,EAAIO,KAAKC,SAAQ,SAACD,EAAME,GACpB,IAAIC,EAAOV,EAAIU,KAAKD,GAChBE,EAAI7D,EAAKC,SAAS0D,GAClBG,EAAI9D,EAAKI,QAAQuD,GACrBP,EAAOW,MAAK,kBAA6C/B,UAAWC,EAAAA,EAAAA,IAAawB,EAAK,IAAKxC,EAAG4C,EAAE,GAAI3C,EAAG2C,EAAE,GAAI3B,MAAM,KAAKC,OAAO,MAAnH,oBAAyBwB,EAAzB,YAAkCC,EAAK,MACnDP,EAAMU,MAAK,SAAC,KAAD,CAAMC,aAAc,kBAAM,EAAKC,MAAM3B,QAAQsB,EAAK,GAAIA,EAAK,KAA0CnB,GAAI,YAAcmB,EAAK,GAA5H,UACP,oBAAShB,OAAQkB,EAAGI,QAAS,KADtB,mBAAiFP,EAAjF,YAA0FC,EAAK,MAG1G,IAAIO,EAAInE,EAAKE,MACb,GAAIyD,EAAQ,IAAM,EAAG,CACjB,IAAIS,EAAID,EAAEZ,GACVD,EAAMS,MAAK,iBAA8C9C,EAAGmD,EAAE,GAAK,GAAIlD,EAAGkD,EAAE,GAAK,GAAtE,SAA2ER,EAAK,IAAhF,sBAA0BD,EAA1B,YAAmCC,EAAK,MACnDL,GAAS,EAEb,GAAII,EAAQ,EAAG,CACX,IAAIU,EAAIF,EAAEX,GACVF,EAAMS,MAAK,iBAA8C9C,EAAGoD,EAAE,GAAK,GAAInD,EAAGmD,EAAE,GAAK,GAAtE,SAA2ET,EAAK,IAAhF,sBAA0BD,EAA1B,YAAmCC,EAAK,MACnDJ,GAAS,MAGjB,EAAKnC,YAAY,CAAE4B,QAASG,EAAOkB,OAAOjB,EAAOC,QAClD7C,KACN,qBACD,WAAW,IAAD,OACNW,KAAKmD,QAAQnD,KAAK6C,MAAMxD,IACxBJ,EAAQC,GAAK,WAAa,IAAZG,EAAW,uDAAN,EAAQ,EAAK8D,QAAQ9D,MAC3C,oBACD,WACI,OAAOW,KAAKZ,MAAMyC,YACrB,EAvCCb,CAAgBY,EAAAA,GA0CtB","sources":["components/Map.jsx"],"sourcesContent":["import Pure from \"./Pure\";\r\nimport ImageMap from \"./Images\";\r\nimport { Link, Navigate } from \"react-router-dom\";\r\nimport client from \"./CLASSES/client\";\r\nimport \"./Map.css\";\r\n\r\nconst Land = {\r\n    Position: [\r\n        //X, Y\r\n        [16, 104],\r\n        [52, 84],\r\n        [88, 64],\r\n        [124, 44],\r\n        [160, 24],\r\n        [196, 4],\r\n        [232, -16],\r\n        [53, 124],\r\n        [89, 104],\r\n        [125, 84],\r\n        [161, 64],\r\n        [197, 44],\r\n        [233, 24],\r\n        [269, 4],\r\n        [90, 144],\r\n        [126, 124],\r\n        [162, 104],\r\n        [198, 84],\r\n        [234, 64],\r\n        [270, 44],\r\n        [306, 24],\r\n        [127, 164],\r\n        [163, 144],\r\n        [199, 124],\r\n        [235, 104],\r\n        [271, 84],\r\n        [307, 64],\r\n        [343, 44],\r\n        [164, 184],\r\n        [200, 164],\r\n        [236, 144],\r\n        [272, 124],\r\n        [308, 104],\r\n        [344, 84],\r\n        [380, 64],\r\n        [201, 204],\r\n        [237, 184],\r\n        [273, 164],\r\n        [309, 144],\r\n        [345, 124],\r\n        [381, 104],\r\n        [417, 84],\r\n        [238, 224],\r\n        [274, 204],\r\n        [310, 184],\r\n        [346, 164],\r\n        [382, 144],\r\n        [418, 124],\r\n        [454, 104]\r\n    ],\r\n    Ruler: [\r\n        [280, 292],\r\n        [280, 8],\r\n        [316, 272],\r\n        [316, 28],\r\n        [352, 252],\r\n        [352, 48],\r\n        [388, 232],\r\n        [388, 68],\r\n        [424, 212],\r\n        [424, 88],\r\n        [460, 192],\r\n        [460, 108],\r\n        [496, 172],\r\n        [496, 128]\r\n    ],\r\n    Arrows: [\r\n        \"144,56 98,84 98,49\",\r\n        \"102,233 149,260 101,266\",\r\n        \"439,87 390,57 438,52\",\r\n        \"443,266 394,257 442,232\"\r\n    ],\r\n    Polygon: [\r\n        \"53,137 90,157 53,177 16,157\",\r\n        \"89,117 126,137 89,157 52,137\",\r\n        \"125,97 162,117 125,137 88,117\",\r\n        \"161,77 198,97 161,117 124,97\",\r\n        \"197,57 234,77 197,97 160,77\",\r\n        \"233,37 270,57 233,77 196,57\",\r\n        \"269,17 306,37 269,57 232,37\",\r\n        \"90,157 127,177 90,197 53,177\",\r\n        \"126,137 163,157 126,177 89,157\",\r\n        \"162,117 199,137 162,157 125,137\",\r\n        \"198,97 235,117 198,137 161,117\",\r\n        \"234,77 271,97 234,117 197,97\",\r\n        \"270,57 307,77 270,97 233,77\",\r\n        \"306,37 343,57 306,77 269,57\",\r\n        \"127,177 164,197 127,217 90,197\",\r\n        \"163,157 200,177 163,197 126,177\",\r\n        \"199,137 236,157 199,177 162,157\",\r\n        \"235,117 272,137 235,157 198,137\",\r\n        \"271,97 308,117 271,137 234,117\",\r\n        \"307,77 344,97 307,117 270,97\",\r\n        \"343,57 380,77 343,97 306,77\",\r\n        \"164,197 201,217 164,237 127,217\",\r\n        \"200,177 237,197 200,217 163,197\",\r\n        \"236,157 273,177 236,197 199,177\",\r\n        \"272,137 309,157 272,177 235,157\",\r\n        \"308,117 345,137 308,157 271,137\",\r\n        \"344,97 381,117 344,137 307,117\",\r\n        \"380,77 417,97 380,117 343,97\",\r\n        \"201,217 238,237 201,257 164,237\",\r\n        \"237,197 274,217 237,237 200,217\",\r\n        \"273,177 310,197 273,217 236,197\",\r\n        \"309,157 346,177 309,197 272,177\",\r\n        \"345,137 382,157 345,177 308,157\",\r\n        \"381,117 418,137 381,157 344,137\",\r\n        \"417,97 454,117 417,137 380,117\",\r\n        \"238,237 275,257 238,277 201,257\",\r\n        \"274,217 311,237 274,257 237,237\",\r\n        \"310,197 347,217 310,237 273,217\",\r\n        \"346,177 383,197 346,217 309,197\",\r\n        \"382,157 419,177 382,197 345,177\",\r\n        \"418,137 455,157 418,177 381,157\",\r\n        \"454,117 491,137 454,157 417,137\",\r\n        \"275,257 312,277 275,297 238,277\",\r\n        \"311,237 348,257 311,277 274,257\",\r\n        \"347,217 384,237 347,257 310,237\",\r\n        \"383,197 420,217 383,237 346,217\",\r\n        \"419,177 456,197 419,217 382,197\",\r\n        \"455,157 492,177 455,197 418,177\",\r\n        \"491,137 528,157 491,177 454,157\"\r\n    ]\r\n}\r\n\r\nconst Updater = {\r\n    fn: () => { }\r\n};\r\n\r\nclass Map extends Pure {\r\n    state = {\r\n        id: parseInt(new URLSearchParams(window.location.search).get(\"id\")) || client.activeVillageId || 1,\r\n        x: 0, y: 0,\r\n        ready: false\r\n    };\r\n    update() {\r\n\r\n    }\r\n    ready() {\r\n        this.updateState({ ready: true });\r\n    }\r\n    updateCoords(x = 0, y = 0) {\r\n        this.updateState({ x, y, ready: true });\r\n    }\r\n    setId(delta = 0, max = 10200) {\r\n        let id = Math.floor(this.state.id + delta) % max;\r\n        Updater.fn(id);\r\n        this.updateState({ id: id < 1 ? id + max : id });\r\n    }\r\n    north() {\r\n        return e => {\r\n            e.preventDefault();\r\n            this.setId(-101);\r\n        }\r\n    }\r\n    east() {\r\n        return e => {\r\n            e.preventDefault();\r\n            this.setId(1, 99);\r\n        }\r\n    }\r\n    west() {\r\n        return e => {\r\n            e.preventDefault();\r\n            this.setId(-1, 99);\r\n        }\r\n    }\r\n    south() {\r\n        return e => {\r\n            e.preventDefault();\r\n            this.setId(101);\r\n        }\r\n    }\r\n    render() {\r\n        if (!client.ready)\r\n            return <></>;\r\n        if (!client.authorized)\r\n            return <Navigate to=\"/Home\" />;\r\n        return <div id=\"Map\">\r\n            <h4>خريطة{this.state.ready ? ` (${this.state.x} , ${this.state.y})` : \"\"}</h4>\r\n            <table className=\"info_box table_collapsed\">\r\n                <tbody>\r\n                    <tr><th colSpan={2}>التفاصيل</th></tr>\r\n                    <tr><td>اللاعب:</td><td>-</td></tr>\r\n                    <tr><td>السكان:</td><td>-</td></tr>\r\n                    <tr><td>التحالف:</td><td>-</td></tr>\r\n                </tbody>\r\n            </table>\r\n            <svg viewBox=\"0 0 540 316\">\r\n                <image xlinkHref={ImageMap.map.background} width={540} height={316} />\r\n                <MapView id={this.state.id}\r\n                    onReady={() => this.ready()}\r\n                    updater={(x, y) => this.updateCoords(x, y)}\r\n                    update={() => this.update()}\r\n                />\r\n                <Link to=\"#\" onClick={this.north()}><polygon points={Land.Arrows[0]} /></Link>\r\n                <Link to=\"#\" onClick={this.east()}><polygon points={Land.Arrows[1]} /></Link>\r\n                <Link to=\"#\" onClick={this.west()}><polygon points={Land.Arrows[2]} /></Link>\r\n                <Link to=\"#\" onClick={this.south()}><polygon points={Land.Arrows[3]} /></Link>\r\n            </svg>\r\n        </div>;\r\n    }\r\n}\r\n\r\nclass MapView extends Pure {\r\n    state = { Content: [] };\r\n    request(id = 1) {\r\n        client.mapViewNormal(map => {\r\n            if (!this.componentIsReady) return;\r\n            let images = [];\r\n            let links = [];\r\n            let ruler = [];\r\n            let rIncX = 0;\r\n            let rIncY = 1;\r\n            map.info.forEach((info, index) => {\r\n                let data = map.data[index];\r\n                let P = Land.Position[index];\r\n                let C = Land.Polygon[index];\r\n                images.push(<image key={`Map-Image-${index}-${data[0]}`} xlinkHref={ImageMap.map[info[3]]} x={P[0]} y={P[1]} width=\"74\" height=\"74\" />);\r\n                links.push(<Link onMouseEnter={() => this.props.updater(data[5], data[6])} key={`Map-Link-${index}-${data[0]}`} to={\"/View?id=\" + data[0]}>\r\n                    <polygon points={C} opacity={0} />\r\n                </Link>);\r\n                let R = Land.Ruler;\r\n                if (index % 7 === 0) {\r\n                    let X = R[rIncX];\r\n                    ruler.push(<text key={`Map-Ruler-X-${index}-${data[0]}`} x={X[0] + 30} y={X[1] + 12}>{data[5]}</text>);\r\n                    rIncX += 2;\r\n                }\r\n                if (index < 7) {\r\n                    let Y = R[rIncY];\r\n                    ruler.push(<text key={`Map-Ruler-Y-${index}-${data[0]}`} x={Y[0] + 30} y={Y[1] + 14}>{data[6]}</text>);\r\n                    rIncY += 2;\r\n                }\r\n            });\r\n            this.updateState({ Content: images.concat(links, ruler) });\r\n        }, id);\r\n    }\r\n    onReady() {\r\n        this.request(this.props.id);\r\n        Updater.fn = (id = 1) => { this.request(id); }\r\n    }\r\n    render() {\r\n        return this.state.Content;\r\n    }\r\n}\r\n\r\nexport default Map;"],"names":["Land","Position","Ruler","Arrows","Polygon","Updater","fn","Map","state","id","parseInt","URLSearchParams","window","location","search","get","client","x","y","ready","this","updateState","delta","max","Math","floor","e","preventDefault","setId","className","colSpan","viewBox","xlinkHref","ImageMap","width","height","MapView","onReady","updater","updateCoords","update","to","onClick","north","points","east","west","south","Pure","Content","map","componentIsReady","images","links","ruler","rIncX","rIncY","info","forEach","index","data","P","C","push","onMouseEnter","props","opacity","R","X","Y","concat","request"],"sourceRoot":""}