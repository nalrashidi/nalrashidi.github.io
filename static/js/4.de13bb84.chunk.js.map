{"version":3,"sources":["components/Interfaces/SnackBar.jsx","components/Functions/validation.js","components/CLASSES/SharedMemory.js","components/Feilds.jsx","components/Login.jsx"],"names":["Dialog","open","close","SnackBar","props","state","visible","message","msg","this","setState","anchorOrigin","vertical","horizontal","autoHideDuration","onClose","className","action","size","aria-label","color","onClick","fontSize","PureComponent","result","valid","safeLength","text","min","max","eMin","eMax","len","length","safeCharacters","err","i","c","codePointAt","safeText","safeUsername","username","safeEmail","email","test","safePassword","password","memory","name","data","FeildsData","value","isValid","init","Username","error","validated","check","validate","console","log","Form","Control","tabIndex","type","onBlur","onChange","e","target","placeholder","Password","Email","Login","redirect","server","event","preventDefault","a","b","client","login","then","response","componentIsReady","authorized","serverNumber","window","localStorage","setItem","e_username","e_password","to","onSubmit","Group","Row","Label","column","sm","ServersList","variant","Pure","ready","servers","listServers","Array","isArray","Number","map","updateState"],"mappings":"qQAMMA,EAAS,CACXC,KAAM,aACNC,MAAO,cAILC,E,kDAGF,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IAHVC,MAAQ,CAAEC,SAAS,GAEA,EADnBC,QAAU,GACS,E,qDAGnB,WAAqB,IAAD,OAChBP,EAAOC,KAAO,eAACO,EAAD,uDAAO,GAAP,OAAc,EAAKP,KAAKO,IACtCR,EAAOE,MAAQ,kBAAM,EAAKA,W,kCAE9B,WACIF,EAAOC,KAAO,aACdD,EAAOE,MAAQ,e,kBAEnB,WAAgB,IAAXM,EAAU,uDAAJ,GACPC,KAAKF,QAAUC,EACfC,KAAKC,SAAS,CAAEJ,SAAS,M,mBAE7B,WAAUG,KAAKC,SAAS,CAAEJ,SAAS,M,oBAEnC,WAAU,IAAD,OACL,OAAO,cAAC,IAAD,CACHK,aAAc,CAAEC,SAAUH,KAAKL,MAAMQ,UAAY,SAAUC,WAAYJ,KAAKL,MAAMS,YAAc,UAChGZ,KAAMQ,KAAKJ,MAAMC,QACjBQ,iBAAkB,IAClBP,QAASE,KAAKF,QACdQ,QAAS,kBAAM,EAAKb,SACpBc,UAAU,gBACVC,OACI,cAAC,IAAD,CAAYC,KAAK,QAAQC,aAAW,QAAQC,MAAM,UAAUC,QAAS,kBAAM,EAAKnB,SAAhF,SACI,cAAC,IAAD,CAAWoB,SAAS,kB,GA9BjBC,kB,mPCZvB,SAASC,IAAoC,IAA7BC,IAA4B,yDAAdlB,EAAc,uDAAJ,GACpC,MAAO,CAAEkB,QAAOD,OAAQjB,GAG5B,SAASmB,IAAgE,IAArDC,EAAoD,uDAA7C,GAAIC,EAAyC,uDAAnC,EAAGC,EAAgC,uDAA1B,GAAIC,EAAsB,uDAAf,GAAIC,EAAW,uDAAJ,GAC5DC,EAAML,EAAKM,OACf,OAAID,EAAMJ,EAAYJ,GAAO,EAAOM,GAC3BE,EAAMH,EAAYL,GAAO,EAAOO,GAClCP,GAAO,GAGlB,SAASU,IAEL,IAFkE,IAA9CP,EAA6C,uDAAtC,GAAIQ,EAAkC,uDAA5B,+HACjCH,EAAML,EAAKM,OACNG,EAAI,EAAGA,EAAIJ,EAAKI,IAAK,CAC1B,IAAIC,EAAIV,EAAKW,YAAYF,GAEzB,GAAIC,EAAI,IAAOA,EAAI,KAAOA,EAAI,MAAUA,EAAI,MAAQA,EAAI,MAASA,EAAI,KACjE,OAAOb,GAAO,EAAOW,GAG7B,OAAOX,GAAO,GA2CH,OAAEE,aAAYa,SAxC7B,WAAiD,IAA/BZ,EAA8B,uDAAvB,GAAIC,EAAmB,uDAAb,EAAGC,EAAU,uDAAJ,GACpCL,EAAS,GACTQ,EAAML,EAAKM,OACf,GAAID,EAAMJ,EAAKJ,EAAM,wEAAkBI,EAAlB,kCAChB,GAAII,EAAMH,EAAKL,EAAM,wEAAkBK,EAAlB,4BAEtB,IAAK,IAAIO,EAAI,EAAGA,EAAIJ,EAAKI,IAAK,CAC1B,IAAIC,EAAIV,EAAKW,YAAYF,GAEzB,GAAIC,EAAI,IAAOA,EAAI,KAAOA,EAAI,MAAUA,EAAI,MAAQA,EAAI,MAASA,EAAI,KAAM,CACvEb,EAAS,+HACT,OAIZ,MAAO,CAAEC,MAAkB,KAAXD,EAAeA,WAyBIgB,aAtBvC,WAAsC,IAAhBC,EAAe,uDAAJ,GACzBT,EAAMS,EAASR,OACnB,OAAID,EAAM,EAAUR,GAAO,EAAO,wMAC9BQ,EAAM,GAAWR,GAAO,EAAO,yMAC5BU,EAAeO,IAkB2BC,UAfrD,WAAgC,IAAbC,EAAY,uDAAJ,GACnBX,EAAMW,EAAMV,OAChB,GAAID,EAAM,GAAKA,EAAM,GAAI,OAAOR,GAAO,EAAO,yHAC9C,IAAIC,EAAQ,6aAA6amB,KAAKD,GAC9b,OAAKlB,EACES,EAAeS,EAAO,yHADVnB,GAAO,EAAO,0HAW2BqB,aAPhE,WAAsC,IAAhBC,EAAe,uDAAJ,GAC7B,OAAOpB,EAAWoB,EAAU,EAAG,GAC3B,uMACA,0MAIsEZ,kB,GC9CzD,I,iDAhBjBa,OAAS,G,uCACT,WAA6B,IAAzBC,EAAwB,uDAAjB,GAAIC,EAAa,uDAAN,KAClBxC,KAAKsC,OAAOC,GAAQC,I,iBAExB,WAAgB,IAAZD,EAAW,uDAAJ,GACP,OAAOvC,KAAKsC,OAAOC,K,iBAEvB,WAAgB,IAAZA,EAAW,uDAAJ,GACHC,EAAOxC,KAAKsC,OAAOC,GACvB,MAAoB,oBAATC,EACAA,IAEA,S,YCNbC,EAAa,CACfT,SAAU,CACNU,MAAO,GACPC,QAAS,kBAAM,IAEnBT,MAAO,CACHQ,MAAO,GACPC,QAAS,kBAAM,IAEnBN,SAAU,CACNK,MAAO,GACPC,QAAS,kBAAM,IAEnBC,KAbe,WAcX5C,KAAKgC,SAASU,MAAQ,GACtB1C,KAAKkC,MAAMQ,MAAQ,GACnB1C,KAAKqC,SAASK,MAAQ,GAEtB1C,KAAKgC,SAASW,QAAU,kBAAM,GAC9B3C,KAAKkC,MAAMS,QAAU,kBAAM,GAC3B3C,KAAKqC,SAASM,QAAU,kBAAM,KAKhCE,E,4MACFC,MAAQ,G,EACRlD,MAAQ,CAAEmD,UAAW,G,uDACrB,WAAqB,IAAD,OAEhBN,EAAWT,SAASW,QAAU,kBAAM,EAAKK,W,mBAE7C,WACI,IAAIN,EAAQD,EAAWT,SAASU,MAC5BP,EAAOc,EAASlB,aAAaW,GAIjC,OAHAQ,QAAQC,IAAI,CAACT,EAAOP,EAAKnB,MAAOmB,EAAKpB,SACrCf,KAAK8C,MAAQX,EAAKpB,OAClBf,KAAKC,SAAS,CAAE8C,UAAWZ,EAAKnB,MAAQ,EAAI,IACrCmB,EAAKnB,Q,oBAEhB,WAAU,IAAD,OACL,OAAO,qCACH,cAACoC,EAAA,EAAKC,QAAN,CAAcC,SAAUtD,KAAKL,MAAM2D,UAAY,EAAGf,KAAK,OAAOgB,KAAK,OAAO9C,KAAK,KAAK+C,OAAQ,kBAAM,EAAKR,SAASS,SAAU,SAAAC,GAAC,OAAKjB,EAAWT,SAASU,MAAQgB,EAAEC,OAAOjB,OAAQkB,YAAY,wEACzL,qBAAKrD,UAAU,iBAAf,SAAiCP,KAAK8C,e,GAlB3BhC,iBAwBjB+C,E,4MACFf,MAAQ,G,EACRlD,MAAQ,CAAEmD,UAAW,G,uDACrB,WAAqB,IAAD,OAEhBN,EAAWJ,SAASM,QAAU,kBAAM,EAAKK,W,mBAE7C,WACI,IAAIN,EAAQD,EAAWJ,SAASK,MAC5BP,EAAOc,EAASb,aAAaM,GAIjC,OAHAQ,QAAQC,IAAI,CAACT,EAAOP,EAAKnB,MAAOmB,EAAKpB,SACrCf,KAAK8C,MAAQX,EAAKpB,OAClBf,KAAKC,SAAS,CAAE8C,UAAWZ,EAAKnB,MAAQ,EAAI,IACrCmB,EAAKnB,Q,oBAEhB,WAAU,IAAD,OACL,OAAO,qCACH,cAACoC,EAAA,EAAKC,QAAN,CAAcC,SAAUtD,KAAKL,MAAM2D,UAAY,EAAGf,KAAK,WAAWgB,KAAK,WAAW9C,KAAK,KAAK+C,OAAQ,kBAAM,EAAKR,SAASS,SAAU,SAAAC,GAAC,OAAKjB,EAAWJ,SAASK,MAAQgB,EAAEC,OAAOjB,OAAQkB,YAAY,kEACjM,qBAAKrD,UAAU,iBAAf,SAAiCP,KAAK8C,e,GAlB3BhC,iBAwBjBgD,E,4MACFhB,MAAQ,G,EACRlD,MAAQ,CAAEmD,UAAW,G,uDACrB,WAAqB,IAAD,OAEhBN,EAAWP,MAAMS,QAAU,kBAAM,EAAKK,W,mBAE1C,WACI,IAAIN,EAAQD,EAAWP,MAAMQ,MACzBP,EAAOc,EAAShB,UAAUS,GAI9B,OAHAQ,QAAQC,IAAI,CAACT,EAAOP,EAAKnB,MAAOmB,EAAKpB,SACrCf,KAAK8C,MAAQX,EAAKpB,OAClBf,KAAKC,SAAS,CAAE8C,UAAWZ,EAAKnB,MAAQ,EAAI,IACrCmB,EAAKnB,Q,oBAEhB,WAAU,IAAD,OACL,OAAO,qCACH,cAACoC,EAAA,EAAKC,QAAN,CAAcC,SAAUtD,KAAKL,MAAM2D,UAAY,EAAGf,KAAK,QAAQgB,KAAK,OAAO9C,KAAK,KAAK+C,OAAQ,kBAAM,EAAKR,SAASS,SAAU,SAAAC,GAAC,OAAKjB,EAAWP,MAAMQ,MAAQgB,EAAEC,OAAOjB,OAAQkB,YAAY,sGACvL,qBAAKrD,UAAU,iBAAf,SAAiCP,KAAK8C,e,GAlB9BhC,kB,6LCvEdiD,E,kDAWF,aAAe,IAAD,8BACV,gBAXJnE,MAAQ,CACJoE,UAAU,GASA,EANdxB,KAAO,CACHR,SAAU,GACVK,SAAU,GACV4B,OAAQ,GAKRxB,IAAWG,OACXM,QAAQC,IAAI,SAHF,E,yCAMd,SAAMe,GAAQ,IAAD,OACTA,EAAMC,iBACN,IAAIC,EAAI3B,IAAWT,SAASW,UACxB0B,EAAI5B,IAAWJ,SAASM,UAiB5B,OAhBIyB,GAAKC,IACLrE,KAAKwC,KAAKR,SAAWS,IAAWT,SAASU,MACzC1C,KAAKwC,KAAKH,SAAWI,IAAWJ,SAASK,MACzC4B,IAAOC,MAAMvE,KAAKwC,MAAMgC,MAAK,SAAAC,GACpB,EAAKC,mBACND,EAASE,YACTL,IAAOM,aAAe,EAAKpC,KAAKyB,OAChCY,OAAOC,aAAaC,QAAQ,SAAUT,IAAOM,cAC7C,EAAK3E,SAAS,CAAE+D,UAAU,MAE1BM,IAAOM,aAAe,EACtBC,OAAOC,aAAaC,QAAQ,SAAU,GACtCxF,IAAOC,KAAKiF,EAASO,WAAaP,EAASQ,mBAIhD,I,oBAGX,WAAU,IAAD,OACL,OAAIjF,KAAKJ,MAAMoE,SACJ,cAAC,IAAD,CAAUkB,GAAG,aAEb,sBAAK3E,UAAU,aAAf,UACH,cAAC,IAAD,IACA,8HACA,sBAAKA,UAAU,iBAAf,UACI,8BAAK,0EACL,81BAIJ,uBAAM4E,SAAU,SAAAjB,GAAK,OAAI,EAAKK,MAAML,IAApC,UACI,eAAC,IAAKkB,MAAN,CAAY7E,UAAU,kBAAtB,UACI,eAAC,IAAK8E,IAAN,WACI,cAAC,IAAKC,MAAN,CAAYC,QAAM,EAACC,GAAI,EAAvB,iFACA,cAAC,IAAD,UACI,cAAC,IAAD,SAGR,eAAC,IAAKH,IAAN,WACI,cAAC,IAAKC,MAAN,CAAYC,QAAM,EAACC,GAAI,EAAvB,2EACA,cAAC,IAAD,UACI,cAAC,IAAD,SAGR,eAAC,IAAKH,IAAN,WACI,eAAC,IAAKC,MAAN,CAAYC,QAAM,EAACC,GAAI,EAAvB,uDAAiC,0BACjC,cAAC,IAAD,CAAKjF,UAAU,cAAf,SACI,cAACkF,EAAD,CAAahC,SAAU,SAAAQ,GAAY,EAAKzB,KAAKyB,OAASA,aAIlE,cAAC,IAAD,CAAQyB,QAAQ,YAAYnC,KAAK,SAAjC,2F,GA1EAoC,KAgFdF,E,4MACF7F,MAAQ,CAAEgG,OAAO,G,EAEjBC,QAAU,6B,6CAEV,WAAW,IAAD,OACNvB,IAAOwB,aAAY,SAAArB,GACVsB,MAAMC,QAAQvB,KACnB,EAAKoB,QAAU,wBAAQtF,UAAU,eAAekD,SAAU,SAAAC,GAAC,OAAI,EAAK/D,MAAM8D,SAASwC,OAAOvC,EAAEC,OAAOjB,SAApF,SACV+B,EAASyB,KAAI,SAAAjC,GAAM,OAAI,yBAA6CvB,MAAOuB,EAAOW,aAA3D,wDAAkFX,EAAOW,eAA5E,SAAWX,EAAOW,mBAE3D,EAAKuB,YAAY,CAAEP,OAAO,U,oBAIlC,WACI,OAAO5F,KAAK6F,Y,GAhBMF,KAoBX5B","file":"static/js/4.de13bb84.chunk.js","sourcesContent":["import { PureComponent } from 'react';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport \"./SnackBar.css\";\r\n\r\nconst Dialog = {\r\n    open: (msg = \"\") => { },\r\n    close: () => { }\r\n}\r\n\r\n/** @augments {PureComponent<{ vertical: String, horizontal: String, duration: Number }>} */\r\nclass SnackBar extends PureComponent {\r\n    state = { visible: false }\r\n    message = \"\";\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    componentDidMount() {\r\n        Dialog.open = (msg = \"\") => this.open(msg);\r\n        Dialog.close = () => this.close();\r\n    }\r\n    componentWillUnmount() {\r\n        Dialog.open = (msg = \"\") => { };\r\n        Dialog.close = () => { };\r\n    }\r\n    open(msg = \"\") {\r\n        this.message = msg;\r\n        this.setState({ visible: true });\r\n    }\r\n    close() { this.setState({ visible: false }); }\r\n\r\n    render() {\r\n        return <Snackbar\r\n            anchorOrigin={{ vertical: this.props.vertical || \"bottom\", horizontal: this.props.horizontal || \"center\" }}\r\n            open={this.state.visible}\r\n            autoHideDuration={6000}\r\n            message={this.message}\r\n            onClose={() => this.close()}\r\n            className=\"toast-message\"\r\n            action={\r\n                <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={() => this.close()}>\r\n                    <CloseIcon fontSize=\"small\" />\r\n                </IconButton>\r\n            }\r\n        />\r\n    }\r\n}\r\n\r\nexport { SnackBar, Dialog }","function result(valid = true, message = \"\") {\r\n    return { valid, result: message }\r\n}\r\n\r\nfunction safeLength(text = \"\", min = 3, max = 15, eMin = \"\", eMax = \"\") {\r\n    let len = text.length;\r\n    if (len < min) return result(false, eMin);\r\n    else if (len > max) return result(false, eMax);\r\n    return result(true);\r\n}\r\n\r\nfunction safeCharacters(text = \"\", err = \"توجد أحرف/رموز غير صالحة\") {\r\n    let len = text.length;\r\n    for (let i = 0; i < len; i++) {\r\n        let c = text.codePointAt(i);\r\n        // if true? then: unsafe character detected -> break loop\r\n        if (c < 31 || (c > 127 && c < 1569) || (c > 1595 && c < 1601) || c > 1610) {\r\n            return result(false, err);\r\n        }\r\n    }\r\n    return result(true);\r\n}\r\n\r\nfunction safeText(text = \"\", min = 4, max = 20) {\r\n    let result = \"\";\r\n    let len = text.length;\r\n    if (len < min) result = `الحد الأدنى ${min} أحرف`;\r\n    else if (len > max) result = `الحد الأقصى ${max} حرف`;\r\n    else {\r\n        for (let i = 0; i < len; i++) {\r\n            let c = text.codePointAt(i);\r\n            // if true? then: unsafe character detected -> break loop\r\n            if (c < 31 || (c > 127 && c < 1569) || (c > 1595 && c < 1601) || c > 1610) {\r\n                result = \"توجد أحرف/رموز غير صالحة\";\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return { valid: result === \"\", result };\r\n}\r\n\r\nfunction safeUsername(username = \"\") {\r\n    let len = username.length;\r\n    if (len < 3) return result(false, \"أسم المستخدم قصير يجب ان لا يقل عن 3 أحرف\");\r\n    if (len > 15) return result(false, \"أسم المستخدم طويل يجب ان لا يزيد عن 15 حرف\");\r\n    return safeCharacters(username);\r\n}\r\n\r\nfunction safeEmail(email = \"\") {\r\n    let len = email.length;\r\n    if (len < 5 || len > 32) return result(false, \"بريد إلكتروني غير صالح\");\r\n    let valid = /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/.test(email);\r\n    if (!valid) return result(false, \"بريد إلكتروني غير صالح\");\r\n    return safeCharacters(email, \"بريد إلكتروني غير صالح\");\r\n}\r\n\r\nfunction safePassword(password = \"\") {\r\n    return safeLength(password, 5, 32,\r\n        \"كلمة المرور قصيرة يجب ان لا تقل عن 5 أحرف\",\r\n        \"كلمة المرور طويلة يجب ان لا تزيد عن 32 حرف\"\r\n    );\r\n}\r\n\r\nexport default { safeLength, safeText, safeUsername, safeEmail, safePassword, safeCharacters }","class SharedMemory {\r\n    memory = {}\r\n    set(name = \"\", data = null) {\r\n        this.memory[name] = data;\r\n    }\r\n    get(name = \"\") {\r\n        return this.memory[name];\r\n    }\r\n    run(name = \"\") {\r\n        let data = this.memory[name];\r\n        if (typeof data === \"function\")\r\n            return data();\r\n        else\r\n            return null;\r\n    }\r\n}\r\n\r\nconst sharedMemory = new SharedMemory();\r\n\r\nexport default sharedMemory;","import { PureComponent } from 'react';\r\n// import { TextField } from '@material-ui/core';\r\nimport { Form } from 'react-bootstrap';\r\nimport validate from \"./Functions/validation\";\r\nimport sharedMemory from './CLASSES/SharedMemory';\r\n// import \"./styles/feilds.css\";\r\n\r\nconst FeildsData = {\r\n    username: {\r\n        value: \"\",\r\n        isValid: () => false\r\n    },\r\n    email: {\r\n        value: \"\",\r\n        isValid: () => false\r\n    },\r\n    password: {\r\n        value: \"\",\r\n        isValid: () => false\r\n    },\r\n    init() {\r\n        this.username.value = \"\";\r\n        this.email.value = \"\";\r\n        this.password.value = \"\";\r\n\r\n        this.username.isValid = () => false;\r\n        this.email.isValid = () => false;\r\n        this.password.isValid = () => false;\r\n    }\r\n}\r\n\r\n/** @augments {PureComponent<{ tabIndex: Number }>} */\r\nclass Username extends PureComponent {\r\n    error = \"\";\r\n    state = { validated: 0 } // 0=not validated yet, 1=not valid, 2=valid\r\n    componentDidMount() {\r\n        // console.log(\"Username did mount.\");\r\n        FeildsData.username.isValid = () => this.check();\r\n    }\r\n    check() {\r\n        let value = FeildsData.username.value;\r\n        let test = validate.safeUsername(value);\r\n        console.log([value, test.valid, test.result]);\r\n        this.error = test.result;\r\n        this.setState({ validated: test.valid ? 2 : 1 });\r\n        return test.valid;\r\n    }\r\n    render() {\r\n        return <>\r\n            <Form.Control tabIndex={this.props.tabIndex || 1} name=\"name\" type=\"text\" size=\"sm\" onBlur={() => this.check()} onChange={e => (FeildsData.username.value = e.target.value)} placeholder=\"اسم المستخدم\" />\r\n            <div className=\"error ta-right\">{this.error}</div>\r\n        </>;\r\n    }\r\n}\r\n\r\n/** @augments {PureComponent<{ tabIndex: Number }>} */\r\nclass Password extends PureComponent {\r\n    error = \"\";\r\n    state = { validated: 0 } // 0=not validated yet, 1=not valid, 2=valid\r\n    componentDidMount() {\r\n        // console.log(\"Password did mount.\");\r\n        FeildsData.password.isValid = () => this.check();\r\n    }\r\n    check() {\r\n        let value = FeildsData.password.value;\r\n        let test = validate.safePassword(value);\r\n        console.log([value, test.valid, test.result]);\r\n        this.error = test.result;\r\n        this.setState({ validated: test.valid ? 2 : 1 });\r\n        return test.valid;\r\n    }\r\n    render() {\r\n        return <>\r\n            <Form.Control tabIndex={this.props.tabIndex || 1} name=\"password\" type=\"password\" size=\"sm\" onBlur={() => this.check()} onChange={e => (FeildsData.password.value = e.target.value)} placeholder=\"كلمة المرور\" />\r\n            <div className=\"error ta-right\">{this.error}</div>\r\n        </>;\r\n    }\r\n}\r\n\r\n/** @augments {PureComponent<{ tabIndex: Number }>} */\r\nclass Email extends PureComponent {\r\n    error = \"\";\r\n    state = { validated: 0 } // 0=not validated yet, 1=not valid, 2=valid\r\n    componentDidMount() {\r\n        // console.log(\"Email did mount.\");\r\n        FeildsData.email.isValid = () => this.check();\r\n    }\r\n    check() {\r\n        let value = FeildsData.email.value;\r\n        let test = validate.safeEmail(value);\r\n        console.log([value, test.valid, test.result]);\r\n        this.error = test.result;\r\n        this.setState({ validated: test.valid ? 2 : 1 });\r\n        return test.valid;\r\n    }\r\n    render() {\r\n        return <>\r\n            <Form.Control tabIndex={this.props.tabIndex || 1} name=\"email\" type=\"text\" size=\"sm\" onBlur={() => this.check()} onChange={e => (FeildsData.email.value = e.target.value)} placeholder=\"البريد الالكتروني\" />\r\n            <div className=\"error ta-right\">{this.error}</div>\r\n        </>;\r\n    }\r\n}\r\n\r\nexport { Username, Email, Password, FeildsData }","import React from \"react\";\r\nimport { Form, Button, Col } from \"react-bootstrap\";\r\nimport { Redirect } from \"react-router\";\r\nimport client from \"./CLASSES/client\";\r\nimport \"./Login.css\";\r\nimport { Username, Password, FeildsData } from \"./Feilds\";\r\nimport { SnackBar, Dialog } from \"./Interfaces/SnackBar\";\r\nimport Pure from \"./Pure\";\r\n\r\nclass Login extends Pure {\r\n    state = {\r\n        redirect: false\r\n    }\r\n\r\n    data = {\r\n        username: \"\",\r\n        password: \"\",\r\n        server: 1,\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n        FeildsData.init();\r\n        console.log(\"Login\");\r\n    }\r\n\r\n    login(event) {\r\n        event.preventDefault();\r\n        let a = FeildsData.username.isValid();\r\n        let b = FeildsData.password.isValid();\r\n        if (a && b) {\r\n            this.data.username = FeildsData.username.value;\r\n            this.data.password = FeildsData.password.value;\r\n            client.login(this.data).then(response => {\r\n                if (!this.componentIsReady) return;\r\n                if (response.authorized) {\r\n                    client.serverNumber = this.data.server;\r\n                    window.localStorage.setItem(\"server\", client.serverNumber);\r\n                    this.setState({ redirect: true });\r\n                } else {\r\n                    client.serverNumber = 0;\r\n                    window.localStorage.setItem(\"server\", 0);\r\n                    Dialog.open(response.e_username + response.e_password);\r\n                }\r\n            })\r\n        }\r\n        return false;\r\n    }\r\n\r\n    render() {\r\n        if (this.state.redirect)\r\n            return <Redirect to=\"/Village\" />;\r\n        else\r\n            return <div className=\"game-login\">\r\n                <SnackBar />\r\n                <h1>الدخول إلى اللعبة</h1>\r\n                <div className=\"game-login-top\">\r\n                    <div><span>الدخول</span></div>\r\n                    <p>\r\n                        عليك تفعيل ملفات التعريف (كوكيز) لتتمكن من تسجيل الدخول. و إذا تعدد مستخدموا هذا الحاسب يجب أن تضغط على تسجيل الخروج في كل مرة تنتهي من اللعب وذلك حفاظاً على بياناتك.\r\n                    </p>\r\n                </div>\r\n                <form onSubmit={event => this.login(event)}>\r\n                    <Form.Group className=\"game-login-form\">\r\n                        <Form.Row>\r\n                            <Form.Label column sm={2}>اسم المستخدم</Form.Label>\r\n                            <Col>\r\n                                <Username />\r\n                            </Col>\r\n                        </Form.Row>\r\n                        <Form.Row>\r\n                            <Form.Label column sm={2}>كلمة المرور</Form.Label>\r\n                            <Col>\r\n                                <Password />\r\n                            </Col>\r\n                        </Form.Row>\r\n                        <Form.Row>\r\n                            <Form.Label column sm={2}>السيرفر<br /></Form.Label>\r\n                            <Col className=\"servers-col\">\r\n                                <ServersList onChange={server => { this.data.server = server; }} />\r\n                            </Col>\r\n                        </Form.Row>\r\n                    </Form.Group>\r\n                    <Button variant=\"secondary\" type=\"submit\">تسجيل الدخول</Button>\r\n                </form>\r\n            </div>;\r\n    }\r\n}\r\n\r\nclass ServersList extends Pure {\r\n    state = { ready: false }\r\n    /** @type {{ serverNumber: number, ready: boolean, ended: boolean, isFull: boolean, started: number, players: number }[]} */\r\n    servers = <></>;\r\n\r\n    onReady() {\r\n        client.listServers(response => {\r\n            if (!Array.isArray(response)) return;\r\n            this.servers = <select className=\"servers-list\" onChange={e => this.props.onChange(Number(e.target.value))}>\r\n                {response.map(server => <option key={\"Server\" + server.serverNumber} value={server.serverNumber}>السيرفر {server.serverNumber}</option>)}\r\n            </select>;\r\n            this.updateState({ ready: true });\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return this.servers;\r\n    }\r\n}\r\n\r\nexport default Login;"],"sourceRoot":""}