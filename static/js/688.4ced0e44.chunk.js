"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[688],{3323:function(e,s,r){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new URLSearchParams(window.location.search).get(e);return r?parseInt(i)||s:i||s}r.d(s,{Z:function(){return i}})},8959:function(e,s){var r=[4,5,5,4,3,3,4,3,1],i=[4,4,3,5,5,4,3,3,1],n=[4,3,4,3,4,5,5,3,1],l=[6,6,6,6,6,6,6,9,15];s.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return[r[e],i[e],n[e],l[e]]}},4688:function(e,s,r){r.r(s),r.d(s,{default:function(){return Z}});var i=r(5671),n=r(3144),l=r(136),d=r(8557),t=r(2102),a=r(3849),c=r(1616),h=r(9466),x=r(5033),j=r(466),o=r(7030),u=r(5626),m=r(2888),p=r(6417),g={res:{r1:"\u0627\u0644\u062e\u0634\u0628",r2:"\u0627\u0644\u0637\u064a\u0646",r3:"\u0627\u0644\u062d\u062f\u064a\u062f",r4:"\u0627\u0644\u0642\u0645\u062d",r5:"\u0627\u0633\u062a\u0647\u0644\u0627\u0643 \u0627\u0644\u0642\u0645\u062d"}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=g.res[e];return(0,p.jsx)("img",{width:16,height:16,src:u.Z.pixel,alt:s,title:s,className:e})},f=r(8959),b=r(3323),y=function(e){(0,l.Z)(r,e);var s=(0,d.Z)(r);function r(){var e;(0,i.Z)(this,r);for(var n=arguments.length,l=new Array(n),d=0;d<n;d++)l[d]=arguments[d];return(e=s.call.apply(s,[this].concat(l))).id=(0,b.Z)("id",x.Z.activeVillageId||1,!0),e.land=new o.Pw,e.capital=(0,p.jsx)(p.Fragment,{}),e.infoTable=(0,p.jsx)(p.Fragment,{}),e.oasisTable=(0,p.jsx)(p.Fragment,{}),e.reportsTable=(0,p.jsx)(p.Fragment,{}),e.imageSource="",e.state={ready:!1},e}return(0,n.Z)(r,[{key:"renderInfoTable",value:function(e){var s=e.playerId>0,r=!e.isVillage,i=e.type,n=(0,p.jsx)(p.Fragment,{}),l=(0,p.jsx)(p.Fragment,{});r&&s||(n=(0,p.jsx)("thead",{children:(0,p.jsx)("tr",{children:(0,p.jsxs)("th",{colSpan:!r&&s?1:3,children:[r?"\u0627\u0644\u0648\u062d\u062f\u0627\u062a":s?"\u0645\u0639\u0644\u0648\u0645\u0627\u062a":"\u062a\u0648\u0632\u064a\u0639 \u0627\u0644\u0623\u0631\u0627\u0636\u064a",":"]})})}));var d=(0,p.jsx)(p.Fragment,{}),t=(0,p.jsx)(p.Fragment,{}),a=(0,p.jsx)(p.Fragment,{}),c=(0,p.jsx)(p.Fragment,{}),x=(0,p.jsx)(p.Fragment,{});if(s)d=(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"\u0627\u0644\u0642\u0628\u064a\u0644\u0629:"}),(0,p.jsx)("td",{children:(0,p.jsx)("b",{children:j.m.Names[e.race]})})]}),t=(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"\u0627\u0644\u062a\u062d\u0627\u0644\u0641:"}),(0,p.jsx)("td",{children:"???"})]}),a=(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"\u0627\u0644\u0645\u0627\u0644\u0643:"}),(0,p.jsx)("td",{children:(0,p.jsx)(h.rU,{to:"/Profile?id="+e.playerId,children:e.playerName})})]}),r?c=(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"\u0627\u0644\u0642\u0631\u064a\u0629:"}),(0,p.jsx)("td",{children:(0,p.jsx)(h.rU,{to:"/View?id="+e.villageId,children:e.villageName})})]}):x=(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"\u0627\u0644\u0633\u0643\u0627\u0646:"}),(0,p.jsx)("td",{children:(0,p.jsx)("b",{children:e.population})})]}),l=(0,p.jsxs)("tbody",{children:[d,t,a,r?c:x]});else if(r){var o=window.screen.availWidth<960,u=function(e,s){return(0,p.jsxs)("tr",{children:[(0,p.jsxs)("td",{children:[v(e),o?"":" \u0625\u0646\u062a\u0627\u062c ".concat(g.res[e]," ")]}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("b",{children:["+%",s]})," \u0641\u064a \u0627\u0644\u0633\u0627\u0639\u0629"]})]},e)},m=[];i<4?m.push(u("r"+(i+1),"100")):i<7?m.push(u("r"+(i-3),"50"),u("r4","50")):m.push(u("r4","100")),this.oasisTable=(0,p.jsxs)("table",{className:"info oasis",children:[(0,p.jsx)("thead",{children:(0,p.jsx)("tr",{children:(0,p.jsx)("th",{colSpan:2,children:"\u0627\u0644\u0625\u0646\u062a\u0627\u062c:"})})}),(0,p.jsx)("tbody",{children:m})]})}else{var b=(0,f.Z)(i);l=(0,p.jsxs)("tbody",{children:[(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:v("r1")}),(0,p.jsx)("td",{className:"number",children:b[0]}),(0,p.jsx)("td",{children:"\u062d\u0637\u0627\u0628"})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:v("r2")}),(0,p.jsx)("td",{className:"number",children:b[1]}),(0,p.jsx)("td",{children:"\u062d\u0641\u0631\u0629 \u0637\u064a\u0646"})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:v("r3")}),(0,p.jsx)("td",{className:"number",children:b[2]}),(0,p.jsx)("td",{children:"\u0645\u0646\u062c\u0645 \u062d\u062f\u064a\u062f"})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:v("r4")}),(0,p.jsx)("td",{className:"number",children:b[3]}),(0,p.jsx)("td",{children:"\u062d\u0642\u0644 \u0642\u0645\u062d"})]})]})}this.infoTable=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("table",{className:"info",children:[n,l]}),(0,p.jsx)("br",{}),this.oasisTable]})}},{key:"options",value:function(e){var s=[];if(e.id!==x.Z.activeVillageId){var r=e.playerId>0,i=!e.isVillage,n=e.hasRallyPoint;i?s.push((0,p.jsx)("div",{children:n?(0,p.jsx)(h.rU,{to:"#/SendTroops?id"+e.id,children:"\xbb \u0646\u0647\u0628 \u0648\u0627\u062d\u0629 \u0645\u0647\u062c\u0648\u0631\u0629"}):"\xbb \u0646\u0647\u0628 \u0648\u0627\u062d\u0629 \u0645\u0647\u062c\u0648\u0631\u0629 (\u0642\u0645 \u0628\u0628\u0646\u0627\u0621 \u0646\u0642\u0637\u0629 \u0627\u0644\u062a\u062c\u0645\u0639)"},"SendTroops")):r?(s.push((0,p.jsx)("div",{children:n?(0,p.jsx)(h.rU,{to:"#/SendTroops?id"+e.id,children:"\xbb \u0625\u0631\u0633\u0627\u0644 \u0642\u0648\u0627\u062a"}):"\xbb \u0625\u0631\u0633\u0627\u0644 \u0642\u0648\u0627\u062a (\u0642\u0645 \u0628\u0628\u0646\u0627\u0621 \u0646\u0642\u0637\u0629 \u0627\u0644\u062a\u062c\u0645\u0639)"},"SendTroops")),s.push((0,p.jsx)("div",{children:e.hasMarketPlace?(0,p.jsx)(h.rU,{to:"#/SendResources?id"+e.id,children:"\xbb \u0625\u0631\u0633\u0627\u0644 \u062a\u062c\u0627\u0631"}):"\xbb \u0625\u0631\u0633\u0627\u0644 \u062a\u062c\u0627\u0631 (\u0642\u0645 \u0628\u0628\u0646\u0627\u0621 \u0627\u0644\u0633\u0648\u0642)"},"SendResources"))):s.push((0,p.jsx)("div",{children:"\xbb \u0628\u0646\u0627\u0621 \u0642\u0631\u064a\u0629 \u062c\u062f\u064a\u062f\u0629"},"SettleVillage"))}return s}},{key:"onReady",value:function(){var e=this;x.Z.viewLand(this.id).then((function(s){Object.assign(e.land,s),s.isCapital&&(e.capital=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("br",{}),(0,p.jsx)("span",{className:"capital",children:"(\u0639\u0627\u0635\u0645\u0629)"})]})),e.imageSource=u.Z[s.isVillage?"village":"oasis"][s.type],e.renderInfoTable(s),e.updateState({ready:!0})}))}},{key:"render",value:function(){if(this.state.ready){var e=this.land,s=window.screen.availWidth<960;return(0,p.jsxs)("div",{id:"ViewLand",children:[(0,p.jsxs)("h4",{className:"title",children:[(0,p.jsx)("span",{className:"VillageName",children:e.name}),"(",e.x," , ",e.y,")",this.capital]}),(0,p.jsxs)(t.Z,{children:[(0,p.jsxs)(a.Z,{children:[(0,p.jsx)(c.Z,{children:(0,p.jsx)("img",{alt:e.isVillage?"\u0642\u0631\u064a\u0629":"\u0648\u0627\u062d\u0629",width:s?150:300,height:s?132:264,src:this.imageSource})}),(0,p.jsx)(c.Z,{children:this.infoTable})]}),(0,p.jsx)(a.Z,{children:(0,p.jsxs)(c.Z,{className:"options",children:[(0,p.jsx)("div",{children:(0,p.jsx)("b",{children:"\u062e\u064a\u0627\u0631\u0627\u062a:"})}),(0,p.jsx)("div",{children:(0,p.jsx)(h.rU,{to:"/Map?id="+e.id,children:"\xbb \u0645\u0631\u0643\u0632 \u0627\u0644\u062e\u0631\u064a\u0637\u0629"})}),this.options(e)]})})]})]})}return(0,p.jsx)(p.Fragment,{})}}]),r}(m.Z),Z=y}}]);