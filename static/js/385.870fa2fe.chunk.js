"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[385],{4275:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(3144),i=n(5671),s=n(547),a=n(2974),o=n.n(a),l=(0,r.Z)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;(0,i.Z)(this,e),this.villageId=t,this.buildingId=n,this.placeId=r,this.upgrade=s,this.finishAt=a,this.level=o})),d=(0,r.Z)((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,i.Z)(this,e),Array.isArray(n)||(n=[0,-1,"",0,!1,[],{},[],{},[]]),this.id=n[0],this.type=n[1],this.name=n[2],this.loyalty=n[3],this.isCapital=n[4];for(var r=this.buildings=[],s=n[5],a=0,o=1;a<s.length;a+=2,o++)r.push([o,s[a],s[a+1]]);this.movements=n[6],this.productions=n[7],this.troops=n[8],this.orders=[],n[9].forEach((function(e){t.orders.push(new l(e[0],e[1],e[2],e[3],e[4],e[5]))})),0!==this.orders.length&&this.orders.sort((function(e,t){return e.finishAt-t.finishAt}))}));function h(){return s.Z.request(o().PLAYER_VILLAGE)}s.Z.defineStructure(o().PLAYER_VILLAGE,d),s.Z.onResponse(o().PLAYER_VILLAGE)},1089:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(5671),i=n(3144),s=n(136),a=n(8557),o=n(7313),l=n(3983),d=n(9269),h=n(3514),c=n(895),u=n(7513),f=n(3849),v=n(1616),p=n(6417),x=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).timer=0,i.ref=o.createRef(),i.order=e.order,i.onFinish=e.onFinish,i}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval((function(){var t=Math.floor((e.order.finishAt-Date.now())/1e3);if(t<0)return clearInterval(e.timer),void e.onFinish();t>0&&(e.ref.current.textContent=h.Z.toTime(t))}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:l.M.del()}),(0,p.jsxs)("td",{className:"name",children:[d.Z.Name(this.order.buildingId)," (\u0627\u0644\u0645\u0633\u062a\u0648\u0649 ",this.order.level,")"]}),(0,p.jsxs)("td",{children:["\u0628\u0627\u0642\u064a ",(0,p.jsx)("span",{ref:this.ref,children:h.Z.toTime(Math.floor((this.order.finishAt-Date.now())/1e3))})," \u0645\u0646 \u0627\u0644\u0648\u0642\u062a "]})]})}}]),n}(o.PureComponent),j=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).data=c.Z.buildingOrders,e}return(0,i.Z)(n,[{key:"ordersRow",value:function(){var e=this;return this.data.orders.filter((function(e){return e.finishAt-Date.now()>0})).map((function(t){return(0,p.jsx)(x,{order:t,onFinish:function(){return e.refresh()}},t.finishAt)}))}},{key:"refresh",value:function(){this.componentIsReady&&this.setState({ready:Date.now()})}},{key:"render",value:function(){var e=this.ordersRow();return 0===this.state.ready||0===e.length?(0,p.jsx)(p.Fragment,{}):(0,p.jsx)(f.Z,{children:(0,p.jsx)(v.Z,{children:(0,p.jsxs)("table",{id:"upgrades",children:[(0,p.jsx)("thead",{children:(0,p.jsx)("tr",{children:(0,p.jsxs)("th",{colspan:"3",children:["\u0627\u0644\u0628\u0646\u0627\u0621: ",l.M.clock("\u0625\u0633\u062a\u0643\u0645\u0627\u0644 \u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0628\u0646\u0627\u0621 \u0648\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0647\u0630\u0647 \u0627\u0644\u0642\u0631\u064a\u0629 \u0641\u0648\u0631\u0627\u064b \u0627\u0644\u062a\u0643\u0644\u0641\u0629 2 \u0630\u0647\u0628")]})})}),(0,p.jsx)("tbody",{children:e})]},this.state.ready)})})}}]),n}(u.Z),m=j},6385:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var r=n(5671),i=n(3144),s=n(136),a=n(8557),o=(n(7313),n(3871)),l=n(5668),d=n(2102),h=n(3849),c=n(1616),u=n(9466),f=n(2888),v=n(9269),p=n(4095),x=n(4275),j=n(3983),m=n(1089),Z=n(6417),g=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={ready:!1,name:"",isCapital:!1,feilds:(0,Z.jsx)(Z.Fragment,{}),movements:(0,Z.jsx)(Z.Fragment,{}),productions:[0,0,0,0],orders:null,troops:(0,Z.jsx)(Z.Fragment,{})},e}return(0,i.Z)(n,[{key:"onReady",value:function(){var e=this;(0,x.Z)().then((function(t){if(e.componentIsReady&&t){var n=[],r=t.id,i=t.buildings;n.push((0,Z.jsx)("image",{xlinkHref:p.Z.village[t.type]},"FeildsBackground"));for(var s=1;s<=18;s++)n.push(v.Z.FromResponse(i[s-1],r).LinkComponent);n.push((0,Z.jsx)(u.rU,{to:"/Center",children:(0,Z.jsx)(o.Z,{placement:"top",overlay:(0,Z.jsx)(l.Z,{id:"center-tooltip",children:"\u0645\u0631\u0643\u0632 \u0627\u0644\u0642\u0631\u064a\u0629"}),children:(0,Z.jsx)("path",{opacity:0,d:"M122 108 148 105 169 108 182 120 184 133 181 143 170 152 160 155 141 157 130 157 114 153 106 145 102 134 104 124 110 115Z"})})},"Center-Building")),e.updateState({ready:!0,name:t.name,isCapital:t.isCapital,feilds:n,productions:t.productions})}}))}},{key:"render",value:function(){return this.state.ready?(0,Z.jsxs)("div",{className:"VillageView",children:[(0,Z.jsxs)("h4",{className:"VillageName title",children:[this.state.name,this.state.isCapital?(0,Z.jsx)("span",{className:"capital",children:"(\u0627\u0644\u0639\u0627\u0635\u0645\u0629)"}):(0,Z.jsx)(Z.Fragment,{})]}),(0,Z.jsxs)(d.Z,{children:[(0,Z.jsxs)(h.Z,{children:[(0,Z.jsx)(c.Z,{children:(0,Z.jsx)("div",{children:(0,Z.jsx)("svg",{viewBox:"0 0 300 264",className:"feilds",children:this.state.feilds})})}),(0,Z.jsxs)(c.Z,{children:[(0,Z.jsx)("div",{className:"movements"}),(0,Z.jsx)(y,{data:this.state.productions}),(0,Z.jsx)("div",{className:"troops"})]})]}),(0,Z.jsx)(m.Z,{})]})]}):(0,Z.jsx)(Z.Fragment,{})}}]),n}(f.Z);function y(e){var t=e.data;return(0,Z.jsxs)("table",{className:"productions",children:[(0,Z.jsx)("thead",{children:(0,Z.jsx)("tr",{children:(0,Z.jsx)("th",{colSpan:3,children:"\u0627\u0644\u0625\u0646\u062a\u0627\u062c \u0643\u0644 \u0633\u0627\u0639\u0629:"})})}),(0,Z.jsx)("tbody",{children:t.map((function(e,t){return(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("td",{children:j.M.res("r"+(t+1))}),(0,Z.jsx)("td",{children:(0,Z.jsx)("b",{children:e.toLocaleString()})}),(0,Z.jsx)("td",{children:j.M.title("r"+(t+1))})]},t)}))})]})}var A=g}}]);