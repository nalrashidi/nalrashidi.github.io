{"version":3,"file":"static/js/681.0893b2de.chunk.js","mappings":"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","sources":["components/Functions/getParam.js","components/Functions/mapWork.js","components/Functions/validation.js","components/Profile.jsx"],"sourcesContent":["export default function getParam(name = \"\", def = \"\", asNumber = false) {\r\n    let p = new URLSearchParams(window.location.search).get(name);\r\n    return asNumber ? parseInt(p) || def : p || def;\r\n}","const mapWork = {\r\n    validCoordinates(x = 0, y = 0) {\r\n        return (x >= -50 && x <= 50 && y >= -50 && y <= 50);\r\n    },\r\n    safeCoordinate(c = 0) {\r\n        return Math.floor(c < -50 ? -50 : c > 50 ? 50 : c);\r\n    },\r\n    safeId(id = 1) {\r\n        return Math.floor(id < 1 ? 1 : id > 10201 ? 10201 : id);\r\n    },\r\n    getId(x = 0, y = 0) {\r\n        return this.safeId((x + 50) * 101 + (y + 50 + 1));\r\n    },\r\n    getCoordinates(id = 1) {\r\n        let w = this.safeId(id) - 1;\r\n        let x = Math.floor(w / 101);\r\n        let y = Math.floor(w - 101 * x);\r\n        return { x: x - 50, y: y - 50 };\r\n    }\r\n}\r\n\r\nexport default mapWork;","function result(valid = true, message = \"\") {\r\n    return { valid, result: message }\r\n}\r\n\r\nfunction safeCharCode(c = 0) {\r\n    return ((c > 8 && c < 12) || (c > 31 && c < 127) || (c > 1569 && c < 1596) || (c > 1600 && c < 1611));\r\n}\r\n\r\nfunction safeLength(text = \"\", min = 3, max = 15, eMin = \"\", eMax = \"\") {\r\n    let len = text.length;\r\n    if (len < min) return result(false, eMin);\r\n    else if (len > max) return result(false, eMax);\r\n    return result(true);\r\n}\r\n\r\nfunction safeCharacters(text = \"\", err = \"توجد أحرف/رموز غير صالحة\") {\r\n    let noEmoji = text.replace(/\\p{Emoji}|\\p{Extended_Pictographic}|\\u200D/gui, \"$\"); // Exclude emojis.\r\n    let len = noEmoji.length;\r\n    for (let i = 0; i < len; i++) {\r\n        /*  Safe Characters code:\r\n            32 -> 126\r\n            1569 -> 1595\r\n            1601 -> 1610\r\n        */\r\n        if (safeCharCode(noEmoji.charCodeAt(i)))\r\n            // Valid:\r\n            continue;\r\n        else\r\n            // Not Valid:\r\n            return result(false, err);\r\n    }\r\n    return result(true);\r\n}\r\n\r\nfunction safeText(text = \"\", min = 4, max = 20) {\r\n    let result = \"\";\r\n    let noEmoji = text.replace(/\\p{Emoji}|\\p{Extended_Pictographic}|\\u200D/gui, \"$\"); // Replace emojis with '$' character.\r\n    let len = noEmoji.length;\r\n    if (len < min) result = `الحد الأدنى ${min} أحرف`;\r\n    else if (len > max) result = `الحد الأقصى ${max} حرف`;\r\n    else {\r\n        for (let i = 0; i < len; i++) {\r\n            if (safeCharCode(noEmoji.charCodeAt(i))) continue;\r\n            // unsafe character detected -> break loop\r\n            result = \"توجد أحرف/رموز غير صالحة\";\r\n            break;\r\n        }\r\n    }\r\n    return { valid: result === \"\", result };\r\n}\r\n\r\nfunction safeUsername(username = \"\") {\r\n    let len = username.replace(/\\p{Emoji}|\\p{Extended_Pictographic}|\\u200D/gui, \"$\").length;\r\n    if (len < 3) return result(false, \"أسم المستخدم قصير يجب ان لا يقل عن 3 أحرف\");\r\n    if (len > 15) return result(false, \"أسم المستخدم طويل يجب ان لا يزيد عن 15 حرف\");\r\n    return safeCharacters(username);\r\n}\r\n\r\nfunction safeEmail(email = \"\") {\r\n    let len = email.length;\r\n    if (len < 5 || len > 32) return result(false, \"بريد إلكتروني غير صالح\");\r\n    let valid = /^[^@]+@[^@]{1,}\\.[^@]{2,}$/.test(email);\r\n    if (!valid) return result(false, \"بريد إلكتروني غير صالح\");\r\n    return safeCharacters(email, \"بريد إلكتروني غير صالح\");\r\n}\r\n\r\nfunction safePassword(password = \"\") {\r\n    return safeLength(password, 5, 32,\r\n        \"كلمة المرور قصيرة يجب ان لا تقل عن 5 أحرف\",\r\n        \"كلمة المرور طويلة يجب ان لا تزيد عن 32 حرف\"\r\n    );\r\n}\r\n\r\nconst validators = { safeLength, safeText, safeUsername, safeEmail, safePassword, safeCharacters };\r\n\r\nexport default validators;","import React from \"react\";\r\nimport Pure from \"./Pure\";\r\nimport \"./Profile.scss\";\r\nimport client from \"./CLASSES/client\";\r\nimport mapWork from \"./Functions/mapWork\";\r\nimport { Race } from \"./CLASSES/troops\";\r\nimport { Link, Navigate } from \"react-router-dom\";\r\nimport getParam from \"./Functions/getParam\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport validators from \"./Functions/validation\";\r\nimport { openSnackBar } from \"./Interfaces/SnackBar\";\r\n\r\nclass Profile extends React.PureComponent {\r\n    type() {\r\n        let d = this.props.display;\r\n        if (d === \"edit\") return <Edit />;\r\n        return <View />;\r\n    }\r\n    render() {\r\n        return <div id=\"Profile\">{this.type()}</div>;\r\n    }\r\n}\r\n\r\nclass View extends Pure {\r\n    state = {\r\n        ready: false,\r\n        name: \"\",\r\n        rank: 0,\r\n        race: \"\",\r\n        allianceId: 0,\r\n        allianceName: \"\",\r\n        numberOfVillages: 0,\r\n        population: 0,\r\n        age: 0,\r\n        gender: 0,\r\n        address: \"\",\r\n        villages: <></>,\r\n        description: [\"\", \"\"],\r\n        self: false,\r\n        id: 0\r\n    }\r\n    onReady() {\r\n        client\r\n            .viewProfile(getParam(\"id\", 0, true))\r\n            .then(profile => {\r\n                if (!this.componentIsReady) return;\r\n                let villages = profile.villages.map((village, index) => {\r\n                    let id = village[1];\r\n                    let coord = mapWork.getCoordinates(id);\r\n                    return <tr key={index}>\r\n                        <td>\r\n                            <Link to={\"/View?id=\" + id}>{village[0]}</Link>\r\n                            {village[2] ? <span className=\"capital\">(عاصمة)</span> : <></>}\r\n                        </td>\r\n                        <td>{village[3]}</td>\r\n                        <td><Link to={\"/Map?id=\" + id}>({coord.x} , {coord.y})</Link></td>\r\n                    </tr>\r\n                });\r\n                let gender = profile.gender;\r\n                this.setState({\r\n                    ready: true,\r\n                    name: profile.name,\r\n                    rank: profile.rank,\r\n                    race: Race.Name(profile.race - 1),\r\n                    allianceId: profile.allianceId || 0,\r\n                    allianceName: profile.allianceName || \"-\",\r\n                    numberOfVillages: profile.numberOfVillages,\r\n                    population: profile.population,\r\n                    age: Math.floor((new Date() - new Date(profile.dob).getTime()) / 3.15576e+10),\r\n                    gender: gender === 1 ? \"ملك`\" : gender === 2 ? \"ملكة\" : \"-\",\r\n                    address: profile.address || \"-\",\r\n                    villages: villages,\r\n                    description: profile.description,\r\n                    self: profile.self,\r\n                    id: profile.id\r\n                });\r\n            })\r\n    }\r\n    showControls() {\r\n        if (!this.state.self) return <></>;\r\n        return <div className=\"player-controls\">\r\n            <Link to=\"/Profile\" className=\"highlight\">نظرة عامة</Link>&nbsp;|&nbsp;\r\n            <Link to=\"/Profile/edit\">من نحن</Link>&nbsp;|&nbsp;\r\n            <Link to=\"/Profile/options\">الخيارات</Link>&nbsp;|&nbsp;\r\n            <Link to=\"/Profile/settings\">الاعدادات</Link>\r\n        </div>\r\n    }\r\n    render() {\r\n        let player = this.state;\r\n        if (!player.ready)\r\n            return <></>;\r\n        else\r\n            return <>\r\n                {this.showControls()}\r\n                <table className=\"player-info table_collapsed\">\r\n                    <thead><tr><th colSpan={2}>{player.name}</th></tr></thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td className=\"player-data\">\r\n                                <table>\r\n                                    <tbody>\r\n                                        <tr><td>الرتبة:</td><td>{player.rank}</td></tr>\r\n                                        <tr><td>القبيلة:</td><td>{player.race}</td></tr>\r\n                                        <tr><td>التحالف:</td><td>لا يوجد</td></tr>\r\n                                        <tr><td>القرى:</td><td>{player.numberOfVillages}</td></tr>\r\n                                        <tr><td>السكان:</td><td>{player.population}</td></tr>\r\n                                        <tr><td>العمر:</td><td>{player.age}</td></tr>\r\n                                        <tr><td>الجنس:</td><td>{player.gender}</td></tr>\r\n                                        <tr><td>السكن:</td><td>{player.address}</td></tr>\r\n                                        <tr><td colSpan={2}>{player.self ? <Link to=\"/Profile/edit\">تعديل المعلومات الشخصية</Link> : <Link to={\"/Messages/send?name=\" + player.name}>إرسال رسالة</Link>}</td></tr>\r\n                                    </tbody>\r\n                                    <tfoot>\r\n                                        <tr><td colSpan={2} className=\"description\">{player.description[0]}Desc1</td></tr>\r\n                                    </tfoot>\r\n                                </table>\r\n                            </td>\r\n                            <td className=\"description\">{player.description[1]}Desc2</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <table className=\"player-villages table_collapsed\">\r\n                    <thead><tr><th colSpan={3}>القرى</th></tr></thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>الاسم</td>\r\n                            <td>السكان</td>\r\n                            <td>الإحداثيات</td>\r\n                        </tr>\r\n                        {player.villages}\r\n                    </tbody>\r\n                </table>\r\n            </>;\r\n    }\r\n}\r\n\r\nclass Edit extends Pure {\r\n    state = {\r\n        ready: false,\r\n        redirect: false,\r\n        name: \"\",\r\n        dob: \"\",\r\n        gender: 0,\r\n        address: \"\",\r\n        villageName: \"\",\r\n        description: [\"\", \"\"],\r\n        medals: [],\r\n    }\r\n    data = {\r\n        dob: \"\",\r\n        gender: 0,\r\n        address: \"\",\r\n        villageName: \"\",\r\n        description: [\"\", \"\"]\r\n    }\r\n    length = 0;\r\n    counter = React.createRef();\r\n\r\n    descLength(text = \"\") {\r\n        return text.replace(/\\p{Emoji}|\\p{Extended_Pictographic}|\\u200D/gu, \"$\").length;\r\n    }\r\n\r\n    onReady() {\r\n        client\r\n            .editProfile()\r\n            .then(profile => {\r\n                if (!this.componentIsReady) return;\r\n                let d = this.data;\r\n                this.length = this.descLength(profile.description.join(\"\"));\r\n                this.setState({\r\n                    ready: true,\r\n                    name: profile.name,\r\n                    dob: d.dob = profile.dob,\r\n                    gender: d.gender = profile.gender,\r\n                    address: d.address = profile.address,\r\n                    villageName: d.villageName = profile.villageName,\r\n                    description: d.description = profile.description,\r\n                    medals: profile.medals,\r\n                });\r\n            });\r\n    }\r\n    actionHandler() {\r\n        let d = this.data;\r\n        let safeAddress = validators.safeText(d.address, 0, 24);\r\n        let safeVillage = validators.safeText(d.villageName, 0, 24);\r\n        let safeD1 = validators.safeText(d.description[0], 0, 1024);\r\n        let safeD2 = validators.safeText(d.description[1], 0, 1024);\r\n        let unsafeLength = this.descLength(d.description.join(\"\")) > 1024;\r\n        console.log([this.descLength(d.description.join(\"\")), this.length]);\r\n        if (!safeAddress.valid)\r\n            return openSnackBar(\"السكن: \" + safeAddress.result);\r\n        if (!safeVillage.valid)\r\n            return openSnackBar(\"أسم القرية: \" + safeVillage.result);\r\n        if (unsafeLength)\r\n            return openSnackBar(\"مربع الوصف: عدد الأحرف المسموح بها تجاوز 1024 حرف\");\r\n        if (!safeD1.valid)\r\n            return openSnackBar(\"مربع الوصف الأول: \" + safeD1.result);\r\n        if (!safeD2.valid)\r\n            return openSnackBar(\"مربع الوصف الثاني: \" + safeD2.result);\r\n        let age = Math.floor((new Date() - new Date(d.dob).getTime()) / 3.15576e+10);\r\n        if (age < 1 || age > 100)\r\n            return openSnackBar(\"تاريخ الميلاد غير صحيح\");\r\n        client\r\n            .saveProfile(this.data)\r\n            .then(response => {\r\n                if (!this.componentIsReady) return;\r\n                console.log(response);\r\n                if (response.done) {\r\n                    openSnackBar(\"تم الحفظ\");\r\n                    this.setState({ redirect: true });\r\n                } else\r\n                    openSnackBar(\"يوجد خطأ, لم يتم الحفظ\");\r\n            });\r\n    }\r\n    textareaChanged(i = 0) {\r\n        return (e => {\r\n            let v = e.target.value;\r\n            this.data.description[i] = v;\r\n            this.counter.current.textContent = this.length = this.descLength(this.data.description.join(\"\"));\r\n        });\r\n    }\r\n    render() {\r\n        let player = this.state;\r\n        if (!player.ready)\r\n            return <></>;\r\n        else if (player.redirect)\r\n            return <Navigate to=\"/Profile\" />\r\n        else\r\n            return <>\r\n                <div className=\"player-controls\">\r\n                    <Link to=\"/Profile\">نظرة عامة</Link>&nbsp;|&nbsp;\r\n                    <Link to=\"/Profile/edit\" className=\"highlight\">من نحن</Link>&nbsp;|&nbsp;\r\n                    <Link to=\"/Profile/options\">الخيارات</Link>&nbsp;|&nbsp;\r\n                    <Link to=\"/Profile/settings\">الاعدادات</Link>\r\n                </div>\r\n                <table className=\"player-info profile-edit table_collapsed\">\r\n                    <thead><tr><th colSpan=\"3\">{player.name}</th></tr></thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>تاريخ الميلاد:</td>\r\n                            <td><input onChange={e => { this.data.dob = e.target.value; }} type=\"date\" defaultValue={player.dob} /></td>\r\n                            <td rowSpan=\"0\" className=\"second\">\r\n                                <div><textarea onChange={this.textareaChanged(1)} defaultValue={player.description[1]}></textarea></div>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>الجنس:</td>\r\n                            <td>\r\n                                <select onChange={e => { this.data.gender = e.target.value; }} defaultValue={player.gender}>\r\n                                    <option value={0}>غير محدد</option>\r\n                                    <option value={1}>ذكر</option>\r\n                                    <option value={2}>أنثى</option>\r\n                                </select>\r\n                            </td>\r\n                        </tr>\r\n                        <tr><td>السكن:</td><td><input onChange={e => { this.data.address = e.target.value; }} type=\"text\" defaultValue={player.address} /></td></tr>\r\n                        <tr><td>أسم القرية:</td><td><input onChange={e => { this.data.villageName = e.target.value; }} type=\"text\" defaultValue={player.villageName} /></td></tr>\r\n                        <tr><td colSpan=\"2\" style={{ width: \"50%\" }}><textarea onChange={this.textareaChanged(0)} ref={this.textarea} defaultValue={player.description[0]}></textarea></td></tr>\r\n                    </tbody>\r\n                    <tfoot>\r\n                        <tr>\r\n                            <td colSpan={3}>عدد الأحرف <span ref={this.counter}>{this.length}</span>/1024</td>\r\n                        </tr>\r\n                    </tfoot>\r\n                </table>\r\n                <Button size=\"sm\" className=\"edit\" onClick={() => this.actionHandler()} variant=\"dark\">حفظ</Button>\r\n            </>;\r\n    }\r\n}\r\n\r\nexport default Profile;"],"names":["getParam","name","def","asNumber","p","URLSearchParams","window","location","search","get","parseInt","mapWork","validCoordinates","x","y","safeCoordinate","c","Math","floor","safeId","id","getId","this","getCoordinates","w","result","valid","message","safeCharCode","safeLength","text","min","max","eMin","eMax","len","length","safeCharacters","err","noEmoji","replace","i","charCodeAt","validators","safeText","safeUsername","username","safeEmail","email","test","safePassword","password","Profile","props","display","Edit","View","type","React","state","ready","rank","race","allianceId","allianceName","numberOfVillages","population","age","gender","address","villages","description","self","client","then","profile","componentIsReady","map","village","index","coord","to","className","setState","Race","Date","dob","getTime","player","showControls","colSpan","Pure","redirect","villageName","medals","data","counter","d","descLength","join","safeAddress","safeVillage","safeD1","safeD2","unsafeLength","console","log","openSnackBar","response","done","e","v","target","value","current","textContent","onChange","defaultValue","rowSpan","textareaChanged","style","width","ref","textarea","Button","size","onClick","actionHandler","variant"],"sourceRoot":""}