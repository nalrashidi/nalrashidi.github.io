{"version":3,"file":"static/js/584.4422cb45.chunk.js","mappings":"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","sources":["components/Functions/villageType.js","components/CLASSES/Types.js","components/SubComponents/IMG.jsx","components/View.jsx"],"sourcesContent":["let wood = [4, 5, 5, 4, 3, 3, 4, 3, 1];\r\nlet clay = [4, 4, 3, 5, 5, 4, 3, 3, 1];\r\nlet iron = [4, 3, 4, 3, 4, 5, 5, 3, 1];\r\nlet crop = [6, 6, 6, 6, 6, 6, 6, 9, 15];\r\n\r\nconst getVillageType = (landType = 0) => [wood[landType], clay[landType], iron[landType], crop[landType]];\r\n\r\nexport default getVillageType;","class LoginResults {\r\n    server = 0;\r\n    activeVillageId = -1;\r\n    authorized = false;\r\n    key = \"\";\r\n    e_username = \"\";\r\n    e_password = \"\";\r\n}\r\n\r\nclass RegisterResults {\r\n    done = false;\r\n    error = false;\r\n    unkownError = false;\r\n    notReady = false;\r\n    isEnded = false;\r\n    isFull = false;\r\n    username_used = false;\r\n    email_used = false;\r\n    e_username = \"\";\r\n    e_password = \"\";\r\n    e_email = \"\";\r\n}\r\n\r\nclass ServerInfo {\r\n    serverNumber = 0;\r\n    ready = false;\r\n    ended = false;\r\n    isFull = false;\r\n    started = 0;\r\n    players = 0;\r\n}\r\n\r\nclass HomeInfo {\r\n    players = 0;\r\n    online = 0;\r\n    servers = 0;\r\n}\r\n\r\nclass ActiveVillage {\r\n    id = 0;\r\n    type = -1; // village type\r\n    /** @type {Number[][]} */\r\n    buildings = [];\r\n    movements = {};\r\n    troops = {};\r\n}\r\n\r\nclass MapResults {\r\n    /** @type {String[][]} */\r\n    info = [];\r\n    /** @type {Number[][]} */\r\n    data = [];\r\n}\r\n\r\nclass ViewResults {\r\n    id = 0;\r\n    x = 0;\r\n    y = 0;\r\n    isVillage = false;\r\n    type = 0;\r\n    name = \"\";\r\n\r\n    // if village/oasis owned:\r\n    race = 0;\r\n    allianceId = 0;\r\n    allianceName = \"\";\r\n    playerId = 0;\r\n    playerName = \"\";\r\n    \r\n    // if village & owned:\r\n    isCapital = false;\r\n    population = 0;\r\n\r\n    // if oasis & owned:\r\n    villageId = 0;\r\n    villageName = \"\";\r\n\r\n    hasRallyPoint = false;\r\n    hasMarketPlace = false;\r\n\r\n    reports = [\r\n        // type, date, id,\r\n        // ...\r\n        // type, date, id,\r\n    ];\r\n\r\n    // if oasis not owned:\r\n    monsters = [\r\n        // troopId, count,\r\n        // ...\r\n        // troopId, count,\r\n    ];\r\n}\r\n\r\n\r\nexport {\r\n    LoginResults,\r\n    RegisterResults,\r\n    ServerInfo,\r\n    HomeInfo,\r\n    ActiveVillage,\r\n    MapResults,\r\n    ViewResults\r\n};","import ImageMap from \"../Images\";\r\n\r\nconst TITLE = {\r\n    res: {\r\n        r1: \"الخشب\",\r\n        r2: \"الطين\",\r\n        r3: \"الحديد\",\r\n        r4: \"القمح\",\r\n        r5: \"استهلاك القمح\",\r\n    }\r\n}\r\n\r\nconst IMG = {\r\n    res(className = \"\") {\r\n        let t = TITLE.res[className];\r\n        return <img width={16} height={16} src={ImageMap.pixel} alt={t} title={t} className={className} />;\r\n    },\r\n\r\n}\r\n\r\nexport { IMG, TITLE };","import { Col, Container, Row } from \"react-bootstrap\";\r\nimport { Link, Navigate } from \"react-router-dom\";\r\nimport client from \"./CLASSES/client\";\r\nimport { Race } from \"./CLASSES/troops\";\r\nimport { ViewResults } from \"./CLASSES/Types\";\r\nimport ImageMap from \"./Images\";\r\nimport Pure from \"./Pure\";\r\nimport { IMG, TITLE } from \"./SubComponents/IMG\";\r\nimport getVillageType from \"./Functions/villageType\";\r\nimport \"./View.css\";\r\n\r\nclass View extends Pure {\r\n    render() {\r\n        if (!client.ready)\r\n            return <></>;\r\n        if (!client.authorized)\r\n            return <Navigate to=\"/Home\" />;\r\n        else\r\n            return <ViewLand />;\r\n    }\r\n}\r\n\r\nclass ViewLand extends Pure {\r\n    id = parseInt(new URLSearchParams(window.location.search).get(\"id\")) || client.activeVillageId || 1;\r\n    land = new ViewResults();\r\n    capital = <></>;\r\n    infoTable = <></>;\r\n    oasisTable = <></>;\r\n    reportsTable = <></>;\r\n    imageSource = \"\";\r\n    state = { ready: false }\r\n\r\n    /** @param {ViewResults} land */\r\n    renderInfoTable(land) {\r\n        let owned = land.playerId > 0;\r\n        let oasis = !land.isVillage;\r\n        let type = land.type;\r\n\r\n        let thead = <></>, tbody = <></>;\r\n        if (!(oasis && owned))\r\n            thead = <thead><tr><th colSpan={(!oasis && owned) ? 1 : 3}>{oasis ? \"الوحدات\" : (owned ? \"معلومات\" : \"توزيع الأراضي\")}:</th></tr></thead>\r\n\r\n        let race = <></>,\r\n            alliance = <></>,\r\n            owner = <></>,\r\n            ownerVillage = <></>,\r\n            population = <></>;\r\n        // monsters = <></>;\r\n        if (owned) {\r\n            race = <tr><td>القبيلة:</td><td><b>{Race.Names[land.race]}</b></td></tr>;\r\n            alliance = <tr><td>التحالف:</td><td>???</td></tr>;\r\n            owner = <tr><td>المالك:</td><td><Link to={\"/Profile?id=\" + land.playerId}>{land.playerName}</Link></td></tr>;\r\n            if (oasis)\r\n                ownerVillage = <tr><td>القرية:</td><td><Link to={\"/View?id=\" + land.villageId}>{land.villageName}</Link></td></tr>;\r\n            else\r\n                population = <tr><td>السكان:</td><td><b>{land.population}</b></td></tr>;\r\n            tbody = <tbody>{race}{alliance}{owner}{oasis ? ownerVillage : population}</tbody>;\r\n        } else {\r\n            if (oasis) {\r\n                let mobile = window.screen.availWidth < 960;\r\n                let row = (className, inc) => <tr key={className}><td>{IMG.res(className)}{mobile ? \"\" : ` إنتاج ${TITLE.res[className]} `}</td><td><b>+%{inc}</b> في الساعة</td></tr>;\r\n                let increment = [];\r\n                if (type < 4) increment.push(row(\"r\" + (type + 1), \"100\"));\r\n                else if (type < 7) increment.push(row(\"r\" + (type - 3), \"50\"), row(\"r4\", \"50\"));\r\n                else increment.push(row(\"r4\", \"100\"));\r\n                this.oasisTable = <table className=\"info oasis\">\r\n                    <thead><tr><th colSpan={2}>الإنتاج:</th></tr></thead>\r\n                    <tbody>{increment}</tbody>\r\n                </table>;\r\n                // monsters = ...;\r\n            } else {\r\n                let landType = getVillageType(type);\r\n                tbody = <tbody>\r\n                    <tr><td>{IMG.res(\"r1\")}</td><td className=\"number\">{landType[0]}</td><td>حطاب</td></tr>\r\n                    <tr><td>{IMG.res(\"r2\")}</td><td className=\"number\">{landType[1]}</td><td>حفرة طين</td></tr>\r\n                    <tr><td>{IMG.res(\"r3\")}</td><td className=\"number\">{landType[2]}</td><td>منجم حديد</td></tr>\r\n                    <tr><td>{IMG.res(\"r4\")}</td><td className=\"number\">{landType[3]}</td><td>حقل قمح</td></tr>\r\n                </tbody>\r\n            }\r\n        }\r\n        this.infoTable = <>\r\n            <table className=\"info\">{thead}{tbody}</table>\r\n            <br />\r\n            {this.oasisTable}\r\n        </>;\r\n    }\r\n    /** @param {ViewResults} land */\r\n    options(land) {\r\n        let content = [];\r\n        if (land.id !== client.activeVillageId) {\r\n            let owned = land.playerId > 0;\r\n            let oasis = !land.isVillage;\r\n            let rally = land.hasRallyPoint;\r\n            if (oasis) {\r\n                content.push(<div key=\"SendTroops\">{rally ? <Link to={\"#/SendTroops?id\" + land.id}>» نهب واحة مهجورة</Link> : \"» نهب واحة مهجورة (قم ببناء نقطة التجمع)\"}</div>);\r\n            } else if (owned) {\r\n                content.push(<div key=\"SendTroops\">{rally ? <Link to={\"#/SendTroops?id\" + land.id}>» إرسال قوات</Link> : \"» إرسال قوات (قم ببناء نقطة التجمع)\"}</div>);\r\n                content.push(<div key=\"SendResources\">{land.hasMarketPlace ? <Link to={\"#/SendResources?id\" + land.id}>» إرسال تجار</Link> : \"» إرسال تجار (قم ببناء السوق)\"}</div>);\r\n            } else\r\n                content.push(<div key=\"SettleVillage\">» بناء قرية جديدة</div>);\r\n        }\r\n        return content;\r\n    }\r\n    onReady() {\r\n        client.viewLand(this.id).then(land => {\r\n            Object.assign(this.land, land);\r\n            if (land.isCapital)\r\n                this.capital = <><br /><span className=\"capital\">(عاصمة)</span></>;\r\n            this.imageSource = ImageMap[land.isVillage ? \"village\" : \"oasis\"][land.type];\r\n            this.renderInfoTable(land);\r\n            this.updateState({ ready: true });\r\n        });\r\n    }\r\n    render() {\r\n        if (!this.state.ready)\r\n            return <></>;\r\n        else {\r\n            let land = this.land;\r\n            let mobile = window.screen.availWidth < 960;\r\n            return <div id=\"ViewLand\">\r\n                <h2><span className=\"VillageName\">{land.name}</span>({land.x} , {land.y}){this.capital}</h2>\r\n                <Container>\r\n                    <Row>\r\n                        <Col><img alt={land.isVillage ? \"قرية\" : \"واحة\"} width={mobile ? 150 : 300} height={mobile ? 132 : 264} src={this.imageSource} /></Col>\r\n                        <Col>{this.infoTable}</Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col className=\"options\">\r\n                            <div><b>خيارات:</b></div>\r\n                            <div><Link to={\"/Map?id=\" + land.id}>» مركز الخريطة</Link></div>\r\n                            {this.options(land)}\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n            </div>;\r\n        }\r\n    }\r\n}\r\n\r\nexport default View;"],"names":["wood","clay","iron","crop","landType","ViewResults","id","x","y","isVillage","type","name","race","allianceId","allianceName","playerId","playerName","isCapital","population","villageId","villageName","hasRallyPoint","hasMarketPlace","reports","monsters","TITLE","res","r1","r2","r3","r4","r5","IMG","className","t","width","height","src","ImageMap","alt","title","View","client","ViewLand","to","Pure","parseInt","URLSearchParams","window","location","search","get","land","capital","infoTable","oasisTable","reportsTable","imageSource","state","ready","owned","oasis","thead","tbody","colSpan","alliance","owner","ownerVillage","Race","Link","mobile","screen","availWidth","row","inc","increment","push","this","getVillageType","content","rally","then","Object","assign","renderInfoTable","updateState","Container","Row","Col","options"],"sourceRoot":""}