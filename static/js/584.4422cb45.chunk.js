"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[584],{5617:function(e,s){var i=[4,5,5,4,3,3,4,3,1],r=[4,4,3,5,5,4,3,3,1],n=[4,3,4,3,4,5,5,3,1],t=[6,6,6,6,6,6,6,9,15];s.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return[i[e],r[e],n[e],t[e]]}},9584:function(e,s,i){i.r(s),i.d(s,{default:function(){return k}});var r=i(5671),n=i(3144),t=i(136),a=i(8557),l=i(7022),d=i(9743),h=i(2677),c=i(501),x=i(6871),j=i(6371),o=i(8937),u=(0,n.Z)((function e(){(0,r.Z)(this,e),this.id=0,this.x=0,this.y=0,this.isVillage=!1,this.type=0,this.name="",this.race=0,this.allianceId=0,this.allianceName="",this.playerId=0,this.playerName="",this.isCapital=!1,this.population=0,this.villageId=0,this.villageName="",this.hasRallyPoint=!1,this.hasMarketPlace=!1,this.reports=[],this.monsters=[]})),p=i(5003),m=i(569),g=i(184),v={res:{r1:"\u0627\u0644\u062e\u0634\u0628",r2:"\u0627\u0644\u0637\u064a\u0646",r3:"\u0627\u0644\u062d\u062f\u064a\u062f",r4:"\u0627\u0644\u0642\u0645\u062d",r5:"\u0627\u0633\u062a\u0647\u0644\u0627\u0643 \u0627\u0644\u0642\u0645\u062d"}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=v.res[e];return(0,g.jsx)("img",{width:16,height:16,src:p.Z.pixel,alt:s,title:s,className:e})},y=i(5617),b=function(e){(0,t.Z)(i,e);var s=(0,a.Z)(i);function i(){return(0,r.Z)(this,i),s.apply(this,arguments)}return(0,n.Z)(i,[{key:"render",value:function(){return j.Z.ready?j.Z.authorized?(0,g.jsx)(Z,{}):(0,g.jsx)(x.Fg,{to:"/Home"}):(0,g.jsx)(g.Fragment,{})}}]),i}(m.Z),Z=function(e){(0,t.Z)(i,e);var s=(0,a.Z)(i);function i(){var e;(0,r.Z)(this,i);for(var n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];return(e=s.call.apply(s,[this].concat(t))).id=parseInt(new URLSearchParams(window.location.search).get("id"))||j.Z.activeVillageId||1,e.land=new u,e.capital=(0,g.jsx)(g.Fragment,{}),e.infoTable=(0,g.jsx)(g.Fragment,{}),e.oasisTable=(0,g.jsx)(g.Fragment,{}),e.reportsTable=(0,g.jsx)(g.Fragment,{}),e.imageSource="",e.state={ready:!1},e}return(0,n.Z)(i,[{key:"renderInfoTable",value:function(e){var s=e.playerId>0,i=!e.isVillage,r=e.type,n=(0,g.jsx)(g.Fragment,{}),t=(0,g.jsx)(g.Fragment,{});i&&s||(n=(0,g.jsx)("thead",{children:(0,g.jsx)("tr",{children:(0,g.jsxs)("th",{colSpan:!i&&s?1:3,children:[i?"\u0627\u0644\u0648\u062d\u062f\u0627\u062a":s?"\u0645\u0639\u0644\u0648\u0645\u0627\u062a":"\u062a\u0648\u0632\u064a\u0639 \u0627\u0644\u0623\u0631\u0627\u0636\u064a",":"]})})}));var a=(0,g.jsx)(g.Fragment,{}),l=(0,g.jsx)(g.Fragment,{}),d=(0,g.jsx)(g.Fragment,{}),h=(0,g.jsx)(g.Fragment,{}),x=(0,g.jsx)(g.Fragment,{});if(s)a=(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:"\u0627\u0644\u0642\u0628\u064a\u0644\u0629:"}),(0,g.jsx)("td",{children:(0,g.jsx)("b",{children:o.m.Names[e.race]})})]}),l=(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:"\u0627\u0644\u062a\u062d\u0627\u0644\u0641:"}),(0,g.jsx)("td",{children:"???"})]}),d=(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:"\u0627\u0644\u0645\u0627\u0644\u0643:"}),(0,g.jsx)("td",{children:(0,g.jsx)(c.Link,{to:"/Profile?id="+e.playerId,children:e.playerName})})]}),i?h=(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:"\u0627\u0644\u0642\u0631\u064a\u0629:"}),(0,g.jsx)("td",{children:(0,g.jsx)(c.Link,{to:"/View?id="+e.villageId,children:e.villageName})})]}):x=(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:"\u0627\u0644\u0633\u0643\u0627\u0646:"}),(0,g.jsx)("td",{children:(0,g.jsx)("b",{children:e.population})})]}),t=(0,g.jsxs)("tbody",{children:[a,l,d,i?h:x]});else if(i){var j=window.screen.availWidth<960,u=function(e,s){return(0,g.jsxs)("tr",{children:[(0,g.jsxs)("td",{children:[f(e),j?"":" \u0625\u0646\u062a\u0627\u062c ".concat(v.res[e]," ")]}),(0,g.jsxs)("td",{children:[(0,g.jsxs)("b",{children:["+%",s]})," \u0641\u064a \u0627\u0644\u0633\u0627\u0639\u0629"]})]},e)},p=[];r<4?p.push(u("r"+(r+1),"100")):r<7?p.push(u("r"+(r-3),"50"),u("r4","50")):p.push(u("r4","100")),this.oasisTable=(0,g.jsxs)("table",{className:"info oasis",children:[(0,g.jsx)("thead",{children:(0,g.jsx)("tr",{children:(0,g.jsx)("th",{colSpan:2,children:"\u0627\u0644\u0625\u0646\u062a\u0627\u062c:"})})}),(0,g.jsx)("tbody",{children:p})]})}else{var m=(0,y.Z)(r);t=(0,g.jsxs)("tbody",{children:[(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:f("r1")}),(0,g.jsx)("td",{className:"number",children:m[0]}),(0,g.jsx)("td",{children:"\u062d\u0637\u0627\u0628"})]}),(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:f("r2")}),(0,g.jsx)("td",{className:"number",children:m[1]}),(0,g.jsx)("td",{children:"\u062d\u0641\u0631\u0629 \u0637\u064a\u0646"})]}),(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:f("r3")}),(0,g.jsx)("td",{className:"number",children:m[2]}),(0,g.jsx)("td",{children:"\u0645\u0646\u062c\u0645 \u062d\u062f\u064a\u062f"})]}),(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:f("r4")}),(0,g.jsx)("td",{className:"number",children:m[3]}),(0,g.jsx)("td",{children:"\u062d\u0642\u0644 \u0642\u0645\u062d"})]})]})}this.infoTable=(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("table",{className:"info",children:[n,t]}),(0,g.jsx)("br",{}),this.oasisTable]})}},{key:"options",value:function(e){var s=[];if(e.id!==j.Z.activeVillageId){var i=e.playerId>0,r=!e.isVillage,n=e.hasRallyPoint;r?s.push((0,g.jsx)("div",{children:n?(0,g.jsx)(c.Link,{to:"#/SendTroops?id"+e.id,children:"\xbb \u0646\u0647\u0628 \u0648\u0627\u062d\u0629 \u0645\u0647\u062c\u0648\u0631\u0629"}):"\xbb \u0646\u0647\u0628 \u0648\u0627\u062d\u0629 \u0645\u0647\u062c\u0648\u0631\u0629 (\u0642\u0645 \u0628\u0628\u0646\u0627\u0621 \u0646\u0642\u0637\u0629 \u0627\u0644\u062a\u062c\u0645\u0639)"},"SendTroops")):i?(s.push((0,g.jsx)("div",{children:n?(0,g.jsx)(c.Link,{to:"#/SendTroops?id"+e.id,children:"\xbb \u0625\u0631\u0633\u0627\u0644 \u0642\u0648\u0627\u062a"}):"\xbb \u0625\u0631\u0633\u0627\u0644 \u0642\u0648\u0627\u062a (\u0642\u0645 \u0628\u0628\u0646\u0627\u0621 \u0646\u0642\u0637\u0629 \u0627\u0644\u062a\u062c\u0645\u0639)"},"SendTroops")),s.push((0,g.jsx)("div",{children:e.hasMarketPlace?(0,g.jsx)(c.Link,{to:"#/SendResources?id"+e.id,children:"\xbb \u0625\u0631\u0633\u0627\u0644 \u062a\u062c\u0627\u0631"}):"\xbb \u0625\u0631\u0633\u0627\u0644 \u062a\u062c\u0627\u0631 (\u0642\u0645 \u0628\u0628\u0646\u0627\u0621 \u0627\u0644\u0633\u0648\u0642)"},"SendResources"))):s.push((0,g.jsx)("div",{children:"\xbb \u0628\u0646\u0627\u0621 \u0642\u0631\u064a\u0629 \u062c\u062f\u064a\u062f\u0629"},"SettleVillage"))}return s}},{key:"onReady",value:function(){var e=this;j.Z.viewLand(this.id).then((function(s){Object.assign(e.land,s),s.isCapital&&(e.capital=(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("br",{}),(0,g.jsx)("span",{className:"capital",children:"(\u0639\u0627\u0635\u0645\u0629)"})]})),e.imageSource=p.Z[s.isVillage?"village":"oasis"][s.type],e.renderInfoTable(s),e.updateState({ready:!0})}))}},{key:"render",value:function(){if(this.state.ready){var e=this.land,s=window.screen.availWidth<960;return(0,g.jsxs)("div",{id:"ViewLand",children:[(0,g.jsxs)("h2",{children:[(0,g.jsx)("span",{className:"VillageName",children:e.name}),"(",e.x," , ",e.y,")",this.capital]}),(0,g.jsxs)(l.Z,{children:[(0,g.jsxs)(d.Z,{children:[(0,g.jsx)(h.Z,{children:(0,g.jsx)("img",{alt:e.isVillage?"\u0642\u0631\u064a\u0629":"\u0648\u0627\u062d\u0629",width:s?150:300,height:s?132:264,src:this.imageSource})}),(0,g.jsx)(h.Z,{children:this.infoTable})]}),(0,g.jsx)(d.Z,{children:(0,g.jsxs)(h.Z,{className:"options",children:[(0,g.jsx)("div",{children:(0,g.jsx)("b",{children:"\u062e\u064a\u0627\u0631\u0627\u062a:"})}),(0,g.jsx)("div",{children:(0,g.jsx)(c.Link,{to:"/Map?id="+e.id,children:"\xbb \u0645\u0631\u0643\u0632 \u0627\u0644\u062e\u0631\u064a\u0637\u0629"})}),this.options(e)]})})]})]})}return(0,g.jsx)(g.Fragment,{})}}]),i}(m.Z),k=b}}]);
//# sourceMappingURL=584.4422cb45.chunk.js.map