{"version":3,"file":"static/js/681.c109380c.chunk.js","mappings":"qGAAe,SAASA,IAAiD,IAAxCC,EAAuC,uDAAhC,GAAIC,EAA4B,uDAAtB,GAAIC,EAAkB,wDAChEC,EAAI,IAAIC,gBAAgBC,OAAOC,SAASC,QAAQC,IAAIR,GACxD,OAAOE,EAAWO,SAASN,IAAMF,EAAME,GAAKF,E,mDCFhD,IAAMS,EAAU,CACZC,iBADY,WACoB,IAAfC,EAAc,uDAAV,EAAGC,EAAO,uDAAH,EACxB,OAAQD,IAAM,IAAMA,GAAK,IAAMC,IAAM,IAAMA,GAAK,IAEpDC,eAJY,WAIW,IAARC,EAAO,uDAAH,EACf,OAAOC,KAAKC,MAAMF,GAAK,IAAM,GAAKA,EAAI,GAAK,GAAKA,IAEpDG,OAPY,WAOI,IAATC,EAAQ,uDAAH,EACR,OAAOH,KAAKC,MAAME,EAAK,EAAI,EAAIA,EAAK,MAAQ,MAAQA,IAExDC,MAVY,WAUS,IAAfR,EAAc,uDAAV,EAAGC,EAAO,uDAAH,EACb,OAAOQ,KAAKH,OAAkB,KAAVN,EAAI,KAAaC,EAAI,GAAK,KAElDS,eAbY,WAaY,IAATH,EAAQ,uDAAH,EACZI,EAAIF,KAAKH,OAAOC,GAAM,EACtBP,EAAII,KAAKC,MAAMM,EAAI,KACnBV,EAAIG,KAAKC,MAAMM,EAAI,IAAMX,GAC7B,MAAO,CAAEA,EAAGA,EAAI,GAAIC,EAAGA,EAAI,MAInC,O,+KCbMW,EAAAA,SAAAA,IAAAA,EAAAA,EAAAA,GAAAA,EAAAA,GAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,GAAAA,SAAAA,IAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,KAAAA,GAAAA,IAAAA,IAAAA,EAAAA,UAAAA,OAAAA,EAAAA,IAAAA,MAAAA,GAAAA,EAAAA,EAAAA,EAAAA,EAAAA,IAAAA,EAAAA,GAAAA,UAAAA,GACM,OADNA,EAAAA,EAAAA,KAAAA,MAAAA,EAAAA,CAAAA,MAAAA,OAAAA,KACFC,MAAQ,CACJC,OAAO,EACP1B,KAAM,GACN2B,KAAM,EACNC,KAAM,GACNC,WAAY,EACZC,aAAc,GACdC,iBAAkB,EAClBC,WAAY,EACZC,IAAK,EACLC,OAAQ,EACRC,QAAS,GACTC,UAAU,wBACVC,YAAa,CAAC,GAAI,IAClBC,MAAM,EACNnB,GAAI,GAfA,EA4GP,OA5GO,+BAiBR,WAAW,IAAD,OACNoB,EAAAA,EAAAA,aACiBxC,EAAAA,EAAAA,GAAS,KAAM,GAAG,IAC9ByC,MAAK,SAAAC,GACF,GAAK,EAAKC,iBAAV,CACA,IAAIN,EAAWK,EAAQL,SAASO,KAAI,SAACC,EAASC,GAC1C,IAAI1B,EAAKyB,EAAQ,GACbE,EAAQpC,EAAAA,EAAAA,eAAuBS,GACnC,OAAO,2BACH,2BACI,SAAC,EAAA4B,KAAD,CAAMC,GAAI,YAAc7B,EAAxB,SAA6ByB,EAAQ,KACpCA,EAAQ,IAAK,iBAAMK,UAAU,UAAhB,+CAA2C,4BAE7D,wBAAKL,EAAQ,MACb,yBAAI,UAAC,EAAAG,KAAD,CAAMC,GAAI,WAAa7B,EAAvB,cAA6B2B,EAAMlC,EAAnC,MAAyCkC,EAAMjC,EAA/C,WANQgC,MAShBX,EAASO,EAAQP,OACrB,EAAKgB,SAAS,CACVxB,OAAO,EACP1B,KAAMyC,EAAQzC,KACd2B,KAAMc,EAAQd,KACdC,KAAMuB,EAAAA,EAAAA,KAAUV,EAAQb,MACxBC,WAAYY,EAAQZ,YAAc,EAClCC,aAAcW,EAAQX,cAAgB,IACtCC,iBAAkBU,EAAQV,iBAC1BC,WAAYS,EAAQT,WACpBC,IAAKjB,KAAKC,OAAO,IAAImC,KAAS,IAAIA,KAAKX,EAAQY,KAAKC,WAAa,UACjEpB,OAAmB,IAAXA,EAAe,sBAAoB,IAAXA,EAAe,2BAAS,IACxDC,QAASM,EAAQN,SAAW,IAC5BC,SAAUA,EACVC,YAAaI,EAAQJ,YACrBC,KAAMG,EAAQH,KACdnB,GAAIsB,EAAQtB,WAG3B,0BACD,WACI,OAAKE,KAAKI,MAAMa,MACT,iBAAKW,UAAU,kBAAf,WACH,SAAC,EAAAF,KAAD,CAAMC,GAAG,WAAT,+DADG,aAEH,SAAC,EAAAD,KAAD,CAAMC,GAAG,gBAAT,6CAFG,aAGH,SAAC,EAAAD,KAAD,CAAMC,GAAG,mBAAT,8DAHG,aAIH,SAAC,EAAAD,KAAD,CAAMC,GAAG,oBAAT,wEALyB,0BAOhC,oBACD,WACI,IAAIO,EAASlC,KAAKI,MAClB,OAAK8B,EAAO7B,OAGD,iBAAKP,GAAG,UAAR,UACFE,KAAKmC,gBACN,mBAAOP,UAAU,8BAAjB,WACI,4BAAO,yBAAI,eAAIQ,QAAS,EAAb,SAAiBF,EAAOvD,YACnC,4BACI,2BACI,eAAIiD,UAAU,cAAd,UACI,8BACI,8BACI,2BAAI,mEAAgB,wBAAKM,EAAO5B,WAChC,2BAAI,yEAAiB,wBAAK4B,EAAO3B,WACjC,2BAAI,yEAAiB,uCACrB,2BAAI,6DAAe,wBAAK2B,EAAOxB,uBAC/B,2BAAI,mEAAgB,wBAAKwB,EAAOvB,iBAChC,2BAAI,6DAAe,wBAAKuB,EAAOtB,UAC/B,2BAAI,6DAAe,wBAAKsB,EAAOrB,aAC/B,2BAAI,6DAAe,wBAAKqB,EAAOpB,cAC/B,yBAAI,eAAIsB,QAAS,EAAb,SAAiBF,EAAOjB,MAAO,SAAC,EAAAS,KAAD,CAAMC,GAAG,gBAAT,+IAA0D,SAAC,EAAAD,KAAD,CAAMC,GAAI,uBAAyBO,EAAOvD,KAA1C,mFAEjG,4BACI,yBAAI,gBAAIyD,QAAS,EAAb,UAAiBF,EAAOlB,YAAY,GAApC,qBAIhB,0BAAKkB,EAAOlB,YAAY,GAAxB,oBAIZ,mBAAOY,UAAU,kCAAjB,WACI,4BAAO,yBAAI,eAAIQ,QAAS,EAAb,iDACX,8BACI,2BACI,4DACA,kEACA,4FAEHF,EAAOnB,mBAtCb,4BA0Cd,EA7GCZ,CAAgBkC,EAAAA,GAiHtB","sources":["components/Functions/getParam.js","components/Functions/mapWork.js","components/Profile.jsx"],"sourcesContent":["export default function getParam(name = \"\", def = \"\", asNumber = false) {\r\n    let p = new URLSearchParams(window.location.search).get(name);\r\n    return asNumber ? parseInt(p) || def : p || def;\r\n}","const mapWork = {\r\n    validCoordinates(x = 0, y = 0) {\r\n        return (x >= -50 && x <= 50 && y >= -50 && y <= 50);\r\n    },\r\n    safeCoordinate(c = 0) {\r\n        return Math.floor(c < -50 ? -50 : c > 50 ? 50 : c);\r\n    },\r\n    safeId(id = 1) {\r\n        return Math.floor(id < 1 ? 1 : id > 10201 ? 10201 : id);\r\n    },\r\n    getId(x = 0, y = 0) {\r\n        return this.safeId((x + 50) * 101 + (y + 50 + 1));\r\n    },\r\n    getCoordinates(id = 1) {\r\n        let w = this.safeId(id) - 1;\r\n        let x = Math.floor(w / 101);\r\n        let y = Math.floor(w - 101 * x);\r\n        return { x: x - 50, y: y - 50 };\r\n    }\r\n}\r\n\r\nexport default mapWork;","import Pure from \"./Pure\";\r\nimport \"./Profile.scss\";\r\nimport client from \"./CLASSES/client\";\r\nimport mapWork from \"./Functions/mapWork\";\r\nimport { Race } from \"./CLASSES/troops\";\r\nimport { Link } from \"react-router-dom\";\r\nimport getParam from \"./Functions/getParam\";\r\n\r\nclass Profile extends Pure {\r\n    state = {\r\n        ready: false,\r\n        name: \"\",\r\n        rank: 0,\r\n        race: \"\",\r\n        allianceId: 0,\r\n        allianceName: \"\",\r\n        numberOfVillages: 0,\r\n        population: 0,\r\n        age: 0,\r\n        gender: 0,\r\n        address: \"\",\r\n        villages: <></>,\r\n        description: [\"\", \"\"],\r\n        self: false,\r\n        id: 0\r\n    }\r\n    onReady() {\r\n        client\r\n            .viewProfile(getParam(\"id\", 0, true))\r\n            .then(profile => {\r\n                if (!this.componentIsReady) return;\r\n                let villages = profile.villages.map((village, index) => {\r\n                    let id = village[1];\r\n                    let coord = mapWork.getCoordinates(id);\r\n                    return <tr key={index}>\r\n                        <td>\r\n                            <Link to={\"/View?id=\" + id}>{village[0]}</Link>\r\n                            {village[2] ? <span className=\"capital\">(عاصمة)</span> : <></>}\r\n                        </td>\r\n                        <td>{village[3]}</td>\r\n                        <td><Link to={\"/Map?id=\" + id}>({coord.x} , {coord.y})</Link></td>\r\n                    </tr>\r\n                });\r\n                let gender = profile.gender;\r\n                this.setState({\r\n                    ready: true,\r\n                    name: profile.name,\r\n                    rank: profile.rank,\r\n                    race: Race.Name(profile.race),\r\n                    allianceId: profile.allianceId || 0,\r\n                    allianceName: profile.allianceName || \"-\",\r\n                    numberOfVillages: profile.numberOfVillages,\r\n                    population: profile.population,\r\n                    age: Math.floor((new Date() - new Date(profile.dob).getTime()) / 3.15576e+10),\r\n                    gender: gender === 1 ? \"ملك`\" : gender === 2 ? \"ملكة\" : \"-\",\r\n                    address: profile.address || \"-\",\r\n                    villages: villages,\r\n                    description: profile.description,\r\n                    self: profile.self,\r\n                    id: profile.id\r\n                });\r\n            })\r\n    }\r\n    showControls() {\r\n        if (!this.state.self) return <></>;\r\n        return <div className=\"player-controls\">\r\n            <Link to=\"/Profile\">نظرة عامة</Link>&nbsp;|&nbsp;\r\n            <Link to=\"/Profile/edit\">من نحن</Link>&nbsp;|&nbsp;\r\n            <Link to=\"/Profile/options\">الخيارات</Link>&nbsp;|&nbsp;\r\n            <Link to=\"/Profile/settings\">الاعدادات</Link>\r\n        </div>\r\n    }\r\n    render() {\r\n        let player = this.state;\r\n        if (!player.ready)\r\n            return <></>;\r\n        else\r\n            return <div id=\"Profile\">\r\n                {this.showControls()}\r\n                <table className=\"player-info table_collapsed\">\r\n                    <thead><tr><th colSpan={2}>{player.name}</th></tr></thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td className=\"player-data\">\r\n                                <table>\r\n                                    <tbody>\r\n                                        <tr><td>الرتبة:</td><td>{player.rank}</td></tr>\r\n                                        <tr><td>القبيلة:</td><td>{player.race}</td></tr>\r\n                                        <tr><td>التحالف:</td><td>dev...</td></tr>\r\n                                        <tr><td>القرى:</td><td>{player.numberOfVillages}</td></tr>\r\n                                        <tr><td>السكان:</td><td>{player.population}</td></tr>\r\n                                        <tr><td>العمر:</td><td>{player.age}</td></tr>\r\n                                        <tr><td>الجنس:</td><td>{player.gender}</td></tr>\r\n                                        <tr><td>السكن:</td><td>{player.address}</td></tr>\r\n                                        <tr><td colSpan={2}>{player.self ? <Link to=\"/Profile/edit\">تعديل المعلومات الشخصية</Link> : <Link to={\"/Messages/send?name=\" + player.name}>إرسال رسالة</Link>}</td></tr>\r\n                                    </tbody>\r\n                                    <tfoot>\r\n                                        <tr><td colSpan={2}>{player.description[0]}Desc1</td></tr>\r\n                                    </tfoot>\r\n                                </table>\r\n                            </td>\r\n                            <td>{player.description[1]}Desc2</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <table className=\"player-villages table_collapsed\">\r\n                    <thead><tr><th colSpan={3}>القرى</th></tr></thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>الاسم</td>\r\n                            <td>السكان</td>\r\n                            <td>الإحداثيات</td>\r\n                        </tr>\r\n                        {player.villages}\r\n                    </tbody>\r\n                </table>\r\n            </div>;\r\n    }\r\n}\r\n\r\n\r\nexport default Profile;"],"names":["getParam","name","def","asNumber","p","URLSearchParams","window","location","search","get","parseInt","mapWork","validCoordinates","x","y","safeCoordinate","c","Math","floor","safeId","id","getId","this","getCoordinates","w","Profile","state","ready","rank","race","allianceId","allianceName","numberOfVillages","population","age","gender","address","villages","description","self","client","then","profile","componentIsReady","map","village","index","coord","Link","to","className","setState","Race","Date","dob","getTime","player","showControls","colSpan","Pure"],"sourceRoot":""}