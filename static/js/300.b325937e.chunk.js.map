{"version":3,"file":"static/js/300.b325937e.chunk.js","mappings":"qGAAe,SAASA,IAAiD,IAAxCC,EAAuC,uDAAhC,GAAIC,EAA4B,uDAAtB,GAAIC,EAAkB,wDAChEC,EAAI,IAAIC,gBAAgBC,OAAOC,SAASC,QAAQC,IAAIR,GACxD,OAAOE,EAAWO,SAASN,IAAMF,EAAME,GAAKF,E,oDCFhD,IAAIS,EAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAChCC,EAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAChCC,EAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAChCC,EAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAIpC,IAFuB,eAACC,EAAD,uDAAY,EAAZ,MAAkB,CAACJ,EAAKI,GAAWH,EAAKG,GAAWF,EAAKE,GAAWD,EAAKC,M,8MCHzFC,EAAQ,CACVC,IAAK,CACDC,GAAI,iCACJC,GAAI,iCACJC,GAAI,uCACJC,GAAI,iCACJC,GAAI,8EAINC,EAAM,WACa,IAAjBC,EAAgB,uDAAJ,GACRC,EAAIT,EAAMC,IAAIO,GAClB,OAAO,gBAAKE,MAAO,GAAIC,OAAQ,GAAIC,IAAKC,EAAAA,EAAAA,MAAgBC,IAAKL,EAAGM,MAAON,EAAGD,UAAWA,K,oBCHvFQ,EAAAA,SAAAA,IAAAA,EAAAA,EAAAA,GAAAA,EAAAA,GAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,GAAAA,SAAAA,IAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,KAAAA,GAAAA,IAAAA,IAAAA,EAAAA,UAAAA,OAAAA,EAAAA,IAAAA,MAAAA,GAAAA,EAAAA,EAAAA,EAAAA,EAAAA,IAAAA,EAAAA,GAAAA,UAAAA,GAQM,OARNA,EAAAA,EAAAA,KAAAA,MAAAA,EAAAA,CAAAA,MAAAA,OAAAA,KACFC,IAAKjC,EAAAA,EAAAA,GAAS,KAAMkC,EAAAA,EAAAA,iBAA0B,GAAG,GAApC,EACbC,KAAO,IAAIC,EAAAA,GAAJ,EACPC,SAAU,0BACVC,WAAY,0BACZC,YAAa,0BACbC,cAAe,0BACfC,YAAc,GAAG,EACjBC,MAAQ,CAAEC,OAAO,GAAT,EA0GP,OA1GO,uCAGR,SAAgBR,GACZ,IAAIS,EAAQT,EAAKU,SAAW,EACxBC,GAASX,EAAKY,UACdC,EAAOb,EAAKa,KAEZC,GAAQ,wBAAOC,GAAQ,wBACrBJ,GAASF,IACXK,GAAQ,4BAAO,yBAAI,gBAAIE,SAAWL,GAASF,EAAS,EAAI,EAArC,UAAyCE,EAAQ,6CAAaF,EAAQ,6CAAY,4EAAlF,YAEvB,IAAIQ,GAAO,wBACPC,GAAW,wBACXC,GAAQ,wBACRC,GAAe,wBACfC,GAAa,wBAEjB,GAAIZ,EACAQ,GAAO,2BAAI,yEAAiB,yBAAI,uBAAIK,EAAAA,EAAAA,MAAWtB,EAAKiB,aACpDC,GAAW,2BAAI,yEAAiB,mCAChCC,GAAQ,2BAAI,mEAAgB,yBAAI,SAAC,KAAD,CAAMI,GAAI,eAAiBvB,EAAKU,SAAhC,SAA2CV,EAAKwB,kBAC5Eb,EACAS,GAAe,2BAAI,mEAAgB,yBAAI,SAAC,KAAD,CAAMG,GAAI,YAAcvB,EAAKyB,UAA7B,SAAyCzB,EAAK0B,mBAErFL,GAAa,2BAAI,mEAAgB,yBAAI,uBAAIrB,EAAKqB,kBAClDN,GAAQ,6BAAQE,EAAMC,EAAUC,EAAOR,EAAQS,EAAeC,UAE9D,GAAIV,EAAO,CACP,IAAIgB,EAASxD,OAAOyD,OAAOC,WAAa,IACpCC,EAAM,SAACzC,EAAW0C,GAAZ,OAAoB,2BAAoB,0BAAK3C,EAAQC,GAAYsC,EAAS,GAAH,0CAAkB9C,EAAMC,IAAIO,GAA5B,SAA+C,2BAAI,8BAAM0C,KAAV,0DAAzF1C,IACnC2C,EAAY,GACZnB,EAAO,EAAGmB,EAAUC,KAAKH,EAAI,KAAOjB,EAAO,GAAI,QAC1CA,EAAO,EAAGmB,EAAUC,KAAKH,EAAI,KAAOjB,EAAO,GAAI,MAAOiB,EAAI,KAAM,OACpEE,EAAUC,KAAKH,EAAI,KAAM,QAC9BI,KAAK9B,YAAa,mBAAOf,UAAU,aAAjB,WACd,4BAAO,yBAAI,eAAI2B,QAAS,EAAb,8DACX,2BAAQgB,WAGT,CACH,IAAIpD,GAAWuD,EAAAA,EAAAA,GAAetB,GAC9BE,GAAQ,8BACJ,2BAAI,wBAAK3B,EAAQ,SAAW,eAAIC,UAAU,SAAd,SAAwBT,EAAS,MAAQ,yDACrE,2BAAI,wBAAKQ,EAAQ,SAAW,eAAIC,UAAU,SAAd,SAAwBT,EAAS,MAAQ,4EACrE,2BAAI,wBAAKQ,EAAQ,SAAW,eAAIC,UAAU,SAAd,SAAwBT,EAAS,MAAQ,kFACrE,2BAAI,wBAAKQ,EAAQ,SAAW,eAAIC,UAAU,SAAd,SAAwBT,EAAS,MAAQ,wEAIjFsD,KAAK/B,WAAY,iCACb,mBAAOd,UAAU,OAAjB,UAAyByB,EAAOC,MAChC,kBACCmB,KAAK9B,gBAGd,qBACA,SAAQJ,GACJ,IAAIoC,EAAU,GACd,GAAIpC,EAAKF,KAAOC,EAAAA,EAAAA,gBAAwB,CACpC,IAAIU,EAAQT,EAAKU,SAAW,EACxBC,GAASX,EAAKY,UACdyB,EAAQrC,EAAKsC,cACb3B,EACAyB,EAAQH,MAAK,yBAAuBI,GAAQ,SAAC,KAAD,CAAMd,GAAI,kBAAoBvB,EAAKF,GAAnC,mGAAkE,qMAAxF,eACfW,GACP2B,EAAQH,MAAK,yBAAuBI,GAAQ,SAAC,KAAD,CAAMd,GAAI,kBAAoBvB,EAAKF,GAAnC,0EAA6D,4KAAnF,eACtBsC,EAAQH,MAAK,yBAA0BjC,EAAKuC,gBAAiB,SAAC,KAAD,CAAMhB,GAAI,qBAAuBvB,EAAKF,GAAtC,0EAAgE,6IAAvG,mBAEtBsC,EAAQH,MAAK,kHAAS,kBAE9B,OAAOG,IACV,qBACD,WAAW,IAAD,OACNrC,EAAAA,EAAAA,SAAgBmC,KAAKpC,IAAI0C,MAAK,SAAAxC,GAC1ByC,OAAOC,OAAO,EAAK1C,KAAMA,GACrBA,EAAK2C,YACL,EAAKzC,SAAU,iCAAE,mBAAM,iBAAMb,UAAU,UAAhB,kDAC3B,EAAKiB,YAAcZ,EAAAA,EAASM,EAAKY,UAAY,UAAY,SAASZ,EAAKa,MACvE,EAAK+B,gBAAgB5C,GACrB,EAAK6C,YAAY,CAAErC,OAAO,SAEjC,oBACD,WACI,GAAK0B,KAAK3B,MAAMC,MAEX,CACD,IAAIR,EAAOkC,KAAKlC,KACZ2B,EAASxD,OAAOyD,OAAOC,WAAa,IACxC,OAAO,iBAAK/B,GAAG,WAAR,WACH,gBAAIT,UAAU,QAAd,WAAsB,iBAAMA,UAAU,cAAhB,SAA+BW,EAAKlC,OAA1D,IAAwEkC,EAAK8C,EAA7E,MAAmF9C,EAAK+C,EAAxF,IAA4Fb,KAAKhC,YACjG,UAAC8C,EAAA,EAAD,YACI,UAACC,EAAA,EAAD,YACI,SAACC,EAAA,EAAD,WAAK,gBAAKvD,IAAKK,EAAKY,UAAY,2BAAS,2BAAQrB,MAAOoC,EAAS,IAAM,IAAKnC,OAAQmC,EAAS,IAAM,IAAKlC,IAAKyC,KAAK5B,iBAClH,SAAC4C,EAAA,EAAD,UAAMhB,KAAK/B,gBAEf,SAAC8C,EAAA,EAAD,WACI,UAACC,EAAA,EAAD,CAAK7D,UAAU,UAAf,WACI,0BAAK,oEACL,0BAAK,SAAC,KAAD,CAAMkC,GAAI,WAAavB,EAAKF,GAA5B,wFACJoC,KAAKiB,QAAQnD,cAf9B,OAAO,4BAqBd,EAlHCH,CAAauD,EAAAA,GAqHnB","sources":["components/Functions/getParam.js","components/Functions/villageType.js","components/SubComponents/IMG.jsx","components/View.jsx"],"sourcesContent":["export default function getParam(name = \"\", def = \"\", asNumber = false) {\r\n    let p = new URLSearchParams(window.location.search).get(name);\r\n    return asNumber ? parseInt(p) || def : p || def;\r\n}","let wood = [4, 5, 5, 4, 3, 3, 4, 3, 1];\r\nlet clay = [4, 4, 3, 5, 5, 4, 3, 3, 1];\r\nlet iron = [4, 3, 4, 3, 4, 5, 5, 3, 1];\r\nlet crop = [6, 6, 6, 6, 6, 6, 6, 9, 15];\r\n\r\nconst getVillageType = (landType = 0) => [wood[landType], clay[landType], iron[landType], crop[landType]];\r\n\r\nexport default getVillageType;","import ImageMap from \"../Images\";\r\n\r\nconst TITLE = {\r\n    res: {\r\n        r1: \"الخشب\",\r\n        r2: \"الطين\",\r\n        r3: \"الحديد\",\r\n        r4: \"القمح\",\r\n        r5: \"استهلاك القمح\",\r\n    }\r\n}\r\n\r\nconst IMG = {\r\n    res(className = \"\") {\r\n        let t = TITLE.res[className];\r\n        return <img width={16} height={16} src={ImageMap.pixel} alt={t} title={t} className={className} />;\r\n    },\r\n\r\n}\r\n\r\nexport { IMG, TITLE };","import { Col, Container, Row } from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport client from \"./CLASSES/client\";\r\nimport { Race } from \"./CLASSES/troops\";\r\nimport { ViewResponse } from \"./CLASSES/Response\";\r\nimport ImageMap from \"./Images\";\r\nimport Pure from \"./Pure\";\r\nimport { IMG, TITLE } from \"./SubComponents/IMG\";\r\nimport getVillageType from \"./Functions/villageType\";\r\nimport \"./View.css\";\r\nimport getParam from \"./Functions/getParam\";\r\n\r\nclass View extends Pure {\r\n    id = getParam(\"id\", client.activeVillageId || 1, true);\r\n    land = new ViewResponse();\r\n    capital = <></>;\r\n    infoTable = <></>;\r\n    oasisTable = <></>;\r\n    reportsTable = <></>;\r\n    imageSource = \"\";\r\n    state = { ready: false }\r\n\r\n    /** @param {ViewResults} land */\r\n    renderInfoTable(land) {\r\n        let owned = land.playerId > 0;\r\n        let oasis = !land.isVillage;\r\n        let type = land.type;\r\n\r\n        let thead = <></>, tbody = <></>;\r\n        if (!(oasis && owned))\r\n            thead = <thead><tr><th colSpan={(!oasis && owned) ? 1 : 3}>{oasis ? \"الوحدات\" : (owned ? \"معلومات\" : \"توزيع الأراضي\")}:</th></tr></thead>\r\n\r\n        let race = <></>,\r\n            alliance = <></>,\r\n            owner = <></>,\r\n            ownerVillage = <></>,\r\n            population = <></>;\r\n        // monsters = <></>;\r\n        if (owned) {\r\n            race = <tr><td>القبيلة:</td><td><b>{Race.Names[land.race]}</b></td></tr>;\r\n            alliance = <tr><td>التحالف:</td><td>???</td></tr>;\r\n            owner = <tr><td>المالك:</td><td><Link to={\"/Profile?id=\" + land.playerId}>{land.playerName}</Link></td></tr>;\r\n            if (oasis)\r\n                ownerVillage = <tr><td>القرية:</td><td><Link to={\"/View?id=\" + land.villageId}>{land.villageName}</Link></td></tr>;\r\n            else\r\n                population = <tr><td>السكان:</td><td><b>{land.population}</b></td></tr>;\r\n            tbody = <tbody>{race}{alliance}{owner}{oasis ? ownerVillage : population}</tbody>;\r\n        } else {\r\n            if (oasis) {\r\n                let mobile = window.screen.availWidth < 960;\r\n                let row = (className, inc) => <tr key={className}><td>{IMG.res(className)}{mobile ? \"\" : ` إنتاج ${TITLE.res[className]} `}</td><td><b>+%{inc}</b> في الساعة</td></tr>;\r\n                let increment = [];\r\n                if (type < 4) increment.push(row(\"r\" + (type + 1), \"100\"));\r\n                else if (type < 7) increment.push(row(\"r\" + (type - 3), \"50\"), row(\"r4\", \"50\"));\r\n                else increment.push(row(\"r4\", \"100\"));\r\n                this.oasisTable = <table className=\"info oasis\">\r\n                    <thead><tr><th colSpan={2}>الإنتاج:</th></tr></thead>\r\n                    <tbody>{increment}</tbody>\r\n                </table>;\r\n                // monsters = ...;\r\n            } else {\r\n                let landType = getVillageType(type);\r\n                tbody = <tbody>\r\n                    <tr><td>{IMG.res(\"r1\")}</td><td className=\"number\">{landType[0]}</td><td>حطاب</td></tr>\r\n                    <tr><td>{IMG.res(\"r2\")}</td><td className=\"number\">{landType[1]}</td><td>حفرة طين</td></tr>\r\n                    <tr><td>{IMG.res(\"r3\")}</td><td className=\"number\">{landType[2]}</td><td>منجم حديد</td></tr>\r\n                    <tr><td>{IMG.res(\"r4\")}</td><td className=\"number\">{landType[3]}</td><td>حقل قمح</td></tr>\r\n                </tbody>\r\n            }\r\n        }\r\n        this.infoTable = <>\r\n            <table className=\"info\">{thead}{tbody}</table>\r\n            <br />\r\n            {this.oasisTable}\r\n        </>;\r\n    }\r\n    /** @param {ViewResults} land */\r\n    options(land) {\r\n        let content = [];\r\n        if (land.id !== client.activeVillageId) {\r\n            let owned = land.playerId > 0;\r\n            let oasis = !land.isVillage;\r\n            let rally = land.hasRallyPoint;\r\n            if (oasis) {\r\n                content.push(<div key=\"SendTroops\">{rally ? <Link to={\"#/SendTroops?id\" + land.id}>» نهب واحة مهجورة</Link> : \"» نهب واحة مهجورة (قم ببناء نقطة التجمع)\"}</div>);\r\n            } else if (owned) {\r\n                content.push(<div key=\"SendTroops\">{rally ? <Link to={\"#/SendTroops?id\" + land.id}>» إرسال قوات</Link> : \"» إرسال قوات (قم ببناء نقطة التجمع)\"}</div>);\r\n                content.push(<div key=\"SendResources\">{land.hasMarketPlace ? <Link to={\"#/SendResources?id\" + land.id}>» إرسال تجار</Link> : \"» إرسال تجار (قم ببناء السوق)\"}</div>);\r\n            } else\r\n                content.push(<div key=\"SettleVillage\">» بناء قرية جديدة</div>);\r\n        }\r\n        return content;\r\n    }\r\n    onReady() {\r\n        client.viewLand(this.id).then(land => {\r\n            Object.assign(this.land, land);\r\n            if (land.isCapital)\r\n                this.capital = <><br /><span className=\"capital\">(عاصمة)</span></>;\r\n            this.imageSource = ImageMap[land.isVillage ? \"village\" : \"oasis\"][land.type];\r\n            this.renderInfoTable(land);\r\n            this.updateState({ ready: true });\r\n        });\r\n    }\r\n    render() {\r\n        if (!this.state.ready)\r\n            return <></>;\r\n        else {\r\n            let land = this.land;\r\n            let mobile = window.screen.availWidth < 960;\r\n            return <div id=\"ViewLand\">\r\n                <h4 className=\"title\"><span className=\"VillageName\">{land.name}</span>({land.x} , {land.y}){this.capital}</h4>\r\n                <Container>\r\n                    <Row>\r\n                        <Col><img alt={land.isVillage ? \"قرية\" : \"واحة\"} width={mobile ? 150 : 300} height={mobile ? 132 : 264} src={this.imageSource} /></Col>\r\n                        <Col>{this.infoTable}</Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col className=\"options\">\r\n                            <div><b>خيارات:</b></div>\r\n                            <div><Link to={\"/Map?id=\" + land.id}>» مركز الخريطة</Link></div>\r\n                            {this.options(land)}\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n            </div>;\r\n        }\r\n    }\r\n}\r\n\r\nexport default View;"],"names":["getParam","name","def","asNumber","p","URLSearchParams","window","location","search","get","parseInt","wood","clay","iron","crop","landType","TITLE","res","r1","r2","r3","r4","r5","IMG","className","t","width","height","src","ImageMap","alt","title","View","id","client","land","ViewResponse","capital","infoTable","oasisTable","reportsTable","imageSource","state","ready","owned","playerId","oasis","isVillage","type","thead","tbody","colSpan","race","alliance","owner","ownerVillage","population","Race","to","playerName","villageId","villageName","mobile","screen","availWidth","row","inc","increment","push","this","getVillageType","content","rally","hasRallyPoint","hasMarketPlace","then","Object","assign","isCapital","renderInfoTable","updateState","x","y","Container","Row","Col","options","Pure"],"sourceRoot":""}